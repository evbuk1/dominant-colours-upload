  [1m[35m (263.7ms)[0m  [1m[35mCREATE DATABASE "db/songkick_development" ENCODING = 'UTF-8'[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE "db/songkick_development" ENCODING = 'UTF-8'[0m
  [1m[35m (273.1ms)[0m  [1m[35mCREATE DATABASE "db/songkick_test" ENCODING = 'utf8'[0m
  [1m[35m (72.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "db/songkick_development"[0m
  [1m[35m (45.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "db/songkick_test"[0m
  [1m[35m (256.8ms)[0m  [1m[35mCREATE DATABASE "db/songkick_development" ENCODING = 'UTF-8'[0m
  [1m[35m (219.9ms)[0m  [1m[35mCREATE DATABASE "db/songkick_test" ENCODING = 'utf8'[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE "db/songkick_development" ENCODING = 'UTF-8'[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE "db/songkick_test" ENCODING = 'utf8'[0m
  [1m[35m (64.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "db/songkick_development"[0m
  [1m[35m (45.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "db/songkick_test"[0m
  [1m[35m (249.0ms)[0m  [1m[35mCREATE DATABASE "db/songkick_development" ENCODING = 'UTF-8'[0m
  [1m[35m (220.7ms)[0m  [1m[35mCREATE DATABASE "db/songkick_test" ENCODING = 'utf8'[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4841601772043095815)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-09-26 17:22:22.806100"], ["updated_at", "2022-09-26 17:22:22.806100"]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4841601772043095815)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
[ActionDispatch::HostAuthorization::DefaultResponseApp] Blocked host: dev.evanbrown.co.uk
Started GET "/" for 51.148.148.49 at 2022-09-27 11:19:23 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/nortech/.rbenv/versions/3.1.2/lib/ruby/gems/3.1.0/gems/railties-7.0.4/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/nortech/.rbenv/versions/3.1.2/lib/ruby/gems/3.1.0/gems/railties-7.0.4/lib/rails/templates/rails/welcome/index.html.erb (Duration: 1.0ms | Allocations: 526)
Completed 200 OK in 5ms (Views: 2.1ms | ActiveRecord: 0.0ms | Allocations: 3572)


Started GET "/" for 51.148.148.49 at 2022-09-27 11:26:18 +0000
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/nortech/.rbenv/versions/3.1.2/lib/ruby/gems/3.1.0/gems/railties-7.0.4/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/nortech/.rbenv/versions/3.1.2/lib/ruby/gems/3.1.0/gems/railties-7.0.4/lib/rails/templates/rails/welcome/index.html.erb (Duration: 0.4ms | Allocations: 299)
Completed 200 OK in 2ms (Views: 1.1ms | Allocations: 937)


Started GET "/api-docs" for 51.148.148.49 at 2022-09-27 11:34:34 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/api-docs/index.html" for 51.148.148.49 at 2022-09-27 11:34:35 +0000
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 51.148.148.49 at 2022-09-27 11:34:35 +0000
Started GET "/api-docs/swagger-ui.css" for 51.148.148.49 at 2022-09-27 11:34:35 +0000
Started GET "/api-docs/swagger-ui-bundle.js" for 51.148.148.49 at 2022-09-27 11:34:35 +0000
Started GET "/api-docs/v1/swagger.yaml" for 51.148.148.49 at 2022-09-27 11:34:35 +0000
  
ActionController::RoutingError (No route matches [GET] "/api-docs/v1/swagger.yaml"):
  
Started GET "/api-docs/favicon-32x32.png" for 51.148.148.49 at 2022-09-27 11:34:35 +0000
Started GET "/api-docs/index.html" for 44.196.175.104 at 2022-09-27 11:34:36 +0000
Started GET "/api-docs/v1/swagger.yaml" for 44.196.175.104 at 2022-09-27 11:34:36 +0000
  
ActionController::RoutingError (No route matches [GET] "/api-docs/v1/swagger.yaml"):
  
DEPRECATION WARNING: ActiveRecord::Base.timestamped_migrations is deprecated and will be removed in Rails 7.1.
Use `ActiveRecord.timestamped_migrations` instead.
 (called from <main> at bin/rails:4)
  [1m[35m (2.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (16.7ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-11 12:54:53.419978', '2023-02-11 12:54:53.419978')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (21.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (2.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (10.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.1ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE `images` (`id` false NOT NULL PRIMARY KEY, `uuid` varchar(36) NOT NULL, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` varchar(255), `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (17.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (2.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (10.2ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE `images` (`uuid` varchar(36) NOT NULL, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` varchar(255), `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-11 12:59:42.068978', '2023-02-11 12:59:42.068978')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started GET "/" for 127.0.0.1 at 2023-02-11 14:08:01 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by Rails::WelcomeController#index as HTML
  Rendering /usr/share/rvm/gems/ruby-3.1.2/gems/railties-7.0.4.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/share/rvm/gems/ruby-3.1.2/gems/railties-7.0.4.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 2.3ms | Allocations: 377)
Completed 200 OK in 13ms (Views: 5.4ms | ActiveRecord: 0.0ms | Allocations: 2278)


Started GET "/v1/api-docs" for 127.0.0.1 at 2023-02-11 14:08:11 +0000
  
ActionController::RoutingError (No route matches [GET] "/v1/api-docs"):
  
Started GET "/favicon.ico" for 127.0.0.1 at 2023-02-11 14:08:11 +0000
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started GET "/api-docs" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
Started GET "/api-docs/index.html" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2023-02-11 14:08:23 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (22.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (16.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE `images` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` varchar(255), `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-11 14:27:21.400749', '2023-02-11 14:27:21.400749')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (16.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (14.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE `images` (`id` true NOT NULL PRIMARY KEY, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` varchar(255), `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (17.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (19.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (9.6ms)[0m  [1m[35mCREATE TABLE `images` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` varchar(255), `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-11 14:34:51.552987', '2023-02-11 14:34:51.552987')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateActiveStorageTables (20230211150451)
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE `active_storage_blobs` (`id` uuid NOT NULL PRIMARY KEY, `key` varchar(255) NOT NULL, `filename` varchar(255) NOT NULL, `content_type` varchar(255), `metadata` text, `service_name` varchar(255) NOT NULL, `byte_size` bigint NOT NULL, `checksum` varchar(255), `created_at` datetime(6) NOT NULL, UNIQUE INDEX `index_active_storage_blobs_on_key` (`key`))[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateActiveStorageTables (20230211150451)
  [1m[35m (17.4ms)[0m  [1m[35mCREATE TABLE `active_storage_blobs` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `key` varchar(255) NOT NULL, `filename` varchar(255) NOT NULL, `content_type` varchar(255), `metadata` text, `service_name` varchar(255) NOT NULL, `byte_size` bigint NOT NULL, `checksum` varchar(255), `created_at` datetime(6) NOT NULL, UNIQUE INDEX `index_active_storage_blobs_on_key` (`key`))[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE TABLE `active_storage_attachments` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) NOT NULL, `record_type` varchar(255) NOT NULL, `record_id` int NOT NULL, `blob_id` int NOT NULL, `created_at` datetime(6) NOT NULL, INDEX `index_active_storage_attachments_on_blob_id` (`blob_id`), UNIQUE INDEX `index_active_storage_attachments_uniqueness` (`record_type`, `record_id`, `name`, `blob_id`), CONSTRAINT `fk_rails_c3b3935057`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[35m (12.7ms)[0m  [1m[35mCREATE TABLE `active_storage_variant_records` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `blob_id` int NOT NULL, `variation_digest` varchar(255) NOT NULL, UNIQUE INDEX `index_active_storage_variant_records_uniqueness` (`blob_id`, `variation_digest`), CONSTRAINT `fk_rails_993965df05`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211150451')[0m
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:16:30 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f8568524640 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2927470-f18d0x.png>, @original_filename="Screenshot from 2022-11-08 12-12-15.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Screenshot from 2022-11-08 12-12-15.png\"\r\nContent-Type: image/png\r\n">}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 457)


  
ActionController::ParameterMissing (param is missing or the value is empty: data):
  
app/controllers/v1/images/images_controller.rb:60:in `image_params'
app/controllers/v1/images/images_controller.rb:24:in `create'
Started GET "/" for 127.0.0.1 at 2023-02-11 15:16:48 +0000
Processing by Rails::WelcomeController#index as HTML
  Rendering /usr/share/rvm/gems/ruby-3.1.2/gems/railties-7.0.4.2/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /usr/share/rvm/gems/ruby-3.1.2/gems/railties-7.0.4.2/lib/rails/templates/rails/welcome/index.html.erb (Duration: 2.6ms | Allocations: 375)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 0.0ms | Allocations: 1790)


Started GET "/api-docs" for 127.0.0.1 at 2023-02-11 15:16:56 +0000
Started GET "/api-docs/index.html" for 127.0.0.1 at 2023-02-11 15:16:56 +0000
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2023-02-11 15:16:56 +0000
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2023-02-11 15:16:56 +0000
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2023-02-11 15:16:56 +0000
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2023-02-11 15:16:56 +0000
Started GET "/v1/images" for 127.0.0.1 at 2023-02-11 15:17:03 +0000
Processing by V1::Images::ImagesController#index as JSON
  [1m[36mImage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `images`[0m
  ↳ app/controllers/v1/indexes/index.rb:28:in `meta'
  [1m[36mCACHE Image Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `images`[0m
  ↳ app/controllers/concerns/pagination_links.rb:49:in `next_page_url'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`created_at` DESC LIMIT 25 OFFSET 0[0m
  ↳ app/controllers/v1/images/images_controller.rb:9:in `index'
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 3831)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:17:35 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f8568ee3780 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2927470-xlvj5z.png>, @original_filename="Screenshot from 2022-11-08 12-12-15.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Screenshot from 2022-11-08 12-12-15.png\"\r\nContent-Type: image/png\r\n">}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms | Allocations: 168)


  
ActionController::ParameterMissing (param is missing or the value is empty: data):
  
app/controllers/v1/images/images_controller.rb:60:in `image_params'
app/controllers/v1/images/images_controller.rb:24:in `create'
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:19:59 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f2360c0a7f8 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2932241-2ixdkq.png>, @original_filename="Screenshot from 2022-11-08 12-12-15.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Screenshot from 2022-11-08 12-12-15.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:19:59.761302', '2023-02-11 15:19:59.761302')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('u9nsi2l7dts9nh3inmh5knz507xf', 'Screenshot from 2022-11-08 12-12-15.png', 'image/png', '{\"identified\":true}', 'local', 298551, 'gEIiREG6reDjzrG+kBushg==', '2023-02-11 15:19:59.771642')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 1, 1, '2023-02-11 15:19:59.772543')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:19:59.773185' WHERE `images`.`id` = 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (0.9ms) [0m[32mUploaded file to key: u9nsi2l7dts9nh3inmh5knz507xf (checksum: gEIiREG6reDjzrG+kBushg==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 700ad1f1-bbf5-487d-ba16-d472bfd42f41) to Async(default) with arguments: #<GlobalID:0x00007f2360947188 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
Completed 201 Created in 31ms (ActiveRecord: 4.4ms | Allocations: 19798)


[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41] Performing ActiveStorage::AnalyzeJob (Job ID: 700ad1f1-bbf5-487d-ba16-d472bfd42f41) from Async(default) enqueued at 2023-02-11T15:19:59Z with arguments: #<GlobalID:0x00007f2360928698 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [700ad1f1-bbf5-487d-ba16-d472bfd42f41] Performed ActiveStorage::AnalyzeJob (Job ID: 700ad1f1-bbf5-487d-ba16-d472bfd42f41) from Async(default) in 8.59ms
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
  [1m[36mImage Load (0.4ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[36m  Disk Storage (0.8ms) [0m[34mGenerated URL for file at key: u9nsi2l7dts9nh3inmh5knz507xf ()[0m
  [1m[36mImage Load (0.8ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mImage Load (0.6ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mImage Load (0.5ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[36m  Disk Storage (0.6ms) [0m[34mGenerated URL for file at key: u9nsi2l7dts9nh3inmh5knz507xf ()[0m
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[36m  Disk Storage (0.6ms) [0m[34mGenerated URL for file at key: u9nsi2l7dts9nh3inmh5knz507xf ()[0m
  [1m[36mImage Load (0.8ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[36m  Disk Storage (0.9ms) [0m[34mGenerated URL for file at key: u9nsi2l7dts9nh3inmh5knz507xf ()[0m
  [1m[36mImage Load (0.5ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[36m  Disk Storage (0.6ms) [0m[34mGenerated URL for file at key: u9nsi2l7dts9nh3inmh5knz507xf ()[0m
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:30:31 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f90f7009be8 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2949906-itk6r4.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:30:31.496138', '2023-02-11 15:30:31.496138')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 2 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 2 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('14k6iw8o9q2zlt28x40xq7id4ict', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-11 15:30:31.501716')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 2, 2, '2023-02-11 15:30:31.503032')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:30:31.503594' WHERE `images`.`id` = 2[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: 14k6iw8o9q2zlt28x40xq7id4ict (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8c2aca2b-efae-4a7d-8c91-d629553ec489) to Async(default) with arguments: #<GlobalID:0x00007f90f6e751d8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/2>>
Completed 200 OK in 18ms (ActiveRecord: 4.0ms | Allocations: 19686)


[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 2 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489] Performing ActiveStorage::AnalyzeJob (Job ID: 8c2aca2b-efae-4a7d-8c91-d629553ec489) from Async(default) enqueued at 2023-02-11T15:30:31Z with arguments: #<GlobalID:0x00007f90f6e2a430 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 2[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8c2aca2b-efae-4a7d-8c91-d629553ec489] Performed ActiveStorage::AnalyzeJob (Job ID: 8c2aca2b-efae-4a7d-8c91-d629553ec489) from Async(default) in 19.2ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:31:03 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f90f7140318 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2949906-8oopn6.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:31:03.058554', '2023-02-11 15:31:03.058554')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 3 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 3 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('lpaq4iqdlh1if2sggmwhhbryadof', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-11 15:31:03.073927')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 3, 3, '2023-02-11 15:31:03.074730')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:31:03.076006' WHERE `images`.`id` = 3[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: lpaq4iqdlh1if2sggmwhhbryadof (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ce4802ba-d6db-4744-8b3e-f106839e9c63) to Async(default) with arguments: #<GlobalID:0x00007f90f87a2200 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/3>>
Completed 200 OK in 20ms (ActiveRecord: 1.6ms | Allocations: 7754)


[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 3 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63] Performing ActiveStorage::AnalyzeJob (Job ID: ce4802ba-d6db-4744-8b3e-f106839e9c63) from Async(default) enqueued at 2023-02-11T15:31:03Z with arguments: #<GlobalID:0x00007f90f8520f18 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 3[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce4802ba-d6db-4744-8b3e-f106839e9c63] Performed ActiveStorage::AnalyzeJob (Job ID: ce4802ba-d6db-4744-8b3e-f106839e9c63) from Async(default) in 6.14ms
Started GET "/v1/images" for 127.0.0.1 at 2023-02-11 15:31:09 +0000
Processing by V1::Images::ImagesController#index as HTML
  [1m[36mImage Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM `images`[0m
  ↳ app/controllers/v1/indexes/index.rb:28:in `meta'
  [1m[36mCACHE Image Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM `images`[0m
  ↳ app/controllers/concerns/pagination_links.rb:49:in `next_page_url'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`created_at` DESC LIMIT 25 OFFSET 0[0m
  ↳ app/controllers/v1/images/images_controller.rb:9:in `index'
Completed 200 OK in 5ms (Views: 1.2ms | ActiveRecord: 0.4ms | Allocations: 4120)


Started GET "/favicon.ico" for 127.0.0.1 at 2023-02-11 15:31:10 +0000
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:36:04 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fd4d1e35078 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2961971-p3871t.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:36:04.766821', '2023-02-11 15:36:04.766821')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 4 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 4 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jra8uyq3eqxwa9ipt3v4wpomrjme', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-11 15:36:04.783268')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 4, 4, '2023-02-11 15:36:04.788630')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:36:04.794633' WHERE `images`.`id` = 4[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (2.5ms) [0m[32mUploaded file to key: jra8uyq3eqxwa9ipt3v4wpomrjme (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a1783a6d-06cb-46d6-8110-350b08f14d95) to Async(default) with arguments: #<GlobalID:0x00007fd4d33b62f8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/4>>
Completed 200 OK in 54ms (ActiveRecord: 3.6ms | Allocations: 19660)


[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 4 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95] Performing ActiveStorage::AnalyzeJob (Job ID: a1783a6d-06cb-46d6-8110-350b08f14d95) from Async(default) enqueued at 2023-02-11T15:36:04Z with arguments: #<GlobalID:0x00007fd4d06d9bb8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 4[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a1783a6d-06cb-46d6-8110-350b08f14d95] Performed ActiveStorage::AnalyzeJob (Job ID: a1783a6d-06cb-46d6-8110-350b08f14d95) from Async(default) in 5.61ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:36:18 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fd4d3445c28 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2961971-rz2yx9.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:36:18.366168', '2023-02-11 15:36:18.366168')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 5 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 5 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('sjtqgy9zc0lqgrmduvmvyx7euck9', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-11 15:36:18.372742')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 5, 5, '2023-02-11 15:36:18.373761')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:36:18.374773' WHERE `images`.`id` = 5[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: sjtqgy9zc0lqgrmduvmvyx7euck9 (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f22e4820-39a8-4edb-98e6-2b1853f977e0) to Async(default) with arguments: #<GlobalID:0x00007fd4d3337cf0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/5>>
Completed 200 OK in 13ms (ActiveRecord: 2.3ms | Allocations: 7764)


[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 5 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0] Performing ActiveStorage::AnalyzeJob (Job ID: f22e4820-39a8-4edb-98e6-2b1853f977e0) from Async(default) enqueued at 2023-02-11T15:36:18Z with arguments: #<GlobalID:0x00007fd4d2836d10 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 5[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f22e4820-39a8-4edb-98e6-2b1853f977e0] Performed ActiveStorage::AnalyzeJob (Job ID: f22e4820-39a8-4edb-98e6-2b1853f977e0) from Async(default) in 6.14ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:37:01 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fe6d0b3d828 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2964695-hb9t8j.svg>, @original_filename="upload.svg", @content_type="image/svg+xml", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"upload.svg\"\r\nContent-Type: image/svg+xml\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:37:01.743842', '2023-02-11 15:37:01.743842')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 6 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 6 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('k3vd42gknkqkjtjlw78zcjs3w6qg', 'upload.svg', 'image/svg+xml', '{\"identified\":true}', 'local', 427, 'A6fqYXUkGKQ/vkM+63aM0w==', '2023-02-11 15:37:01.749969')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 6, 6, '2023-02-11 15:37:01.750763')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.0ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:37:01.751287' WHERE `images`.`id` = 6[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: k3vd42gknkqkjtjlw78zcjs3w6qg (checksum: A6fqYXUkGKQ/vkM+63aM0w==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4d9eb5ef-78f9-4a03-a039-39926e3fe7fe) to Async(default) with arguments: #<GlobalID:0x00007fe6d09a8328 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/6>>
Completed 200 OK in 23ms (ActiveRecord: 2.9ms | Allocations: 19698)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 6 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe] Performing ActiveStorage::AnalyzeJob (Job ID: 4d9eb5ef-78f9-4a03-a039-39926e3fe7fe) from Async(default) enqueued at 2023-02-11T15:37:01Z with arguments: #<GlobalID:0x00007fe6d0bc6128 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe]   [1m[36mTRANSACTION (4.5ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 6[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe]   [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4d9eb5ef-78f9-4a03-a039-39926e3fe7fe] Performed ActiveStorage::AnalyzeJob (Job ID: 4d9eb5ef-78f9-4a03-a039-39926e3fe7fe) from Async(default) in 41.77ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 15:50:15 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fa1510ce3c0 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2979697-9fsxbo.png>, @original_filename="Screenshot from 2023-02-02 11-56-03.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Screenshot from 2023-02-02 11-56-03.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'test', NULL, NULL, NULL, NULL, '2023-02-11 15:50:15.496831', '2023-02-11 15:50:15.496831')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 7 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 7 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('pvavafxw6tc4y5sn5haepxfllmyi', 'Screenshot from 2023-02-02 11-56-03.png', 'image/png', '{\"identified\":true}', 'local', 492491, 'V8h9Fqd9r8apsf/gFQtwig==', '2023-02-11 15:50:15.505499')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 7, 7, '2023-02-11 15:50:15.511317')[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 15:50:15.516640' WHERE `images`.`id` = 7[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:26:in `create'
[36m  Disk Storage (3.9ms) [0m[32mUploaded file to key: pvavafxw6tc4y5sn5haepxfllmyi (checksum: V8h9Fqd9r8apsf/gFQtwig==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 062e1d76-27c6-4d5b-aedc-1990087e9a39) to Async(default) with arguments: #<GlobalID:0x00007fa1526435c0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/7>>
Completed 200 OK in 51ms (ActiveRecord: 2.5ms | Allocations: 19662)


[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 7 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39] Performing ActiveStorage::AnalyzeJob (Job ID: 062e1d76-27c6-4d5b-aedc-1990087e9a39) from Async(default) enqueued at 2023-02-11T15:50:15Z with arguments: #<GlobalID:0x00007fa150165f50 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 7[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [062e1d76-27c6-4d5b-aedc-1990087e9a39] Performed ActiveStorage::AnalyzeJob (Job ID: 062e1d76-27c6-4d5b-aedc-1990087e9a39) from Async(default) in 4.73ms
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (42.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (16.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (11.1ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE `images` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` varchar(255), `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20230211150451)
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE `active_storage_blobs` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `key` varchar(255) NOT NULL, `filename` varchar(255) NOT NULL, `content_type` varchar(255), `metadata` text, `service_name` varchar(255) NOT NULL, `byte_size` bigint NOT NULL, `checksum` varchar(255), `created_at` datetime(6) NOT NULL, UNIQUE INDEX `index_active_storage_blobs_on_key` (`key`))[0m
  [1m[35m (14.6ms)[0m  [1m[35mCREATE TABLE `active_storage_attachments` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) NOT NULL, `record_type` varchar(255) NOT NULL, `record_id` int NOT NULL, `blob_id` int NOT NULL, `created_at` datetime(6) NOT NULL, INDEX `index_active_storage_attachments_on_blob_id` (`blob_id`), UNIQUE INDEX `index_active_storage_attachments_uniqueness` (`record_type`, `record_id`, `name`, `blob_id`), CONSTRAINT `fk_rails_c3b3935057`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[35m (13.9ms)[0m  [1m[35mCREATE TABLE `active_storage_variant_records` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `blob_id` int NOT NULL, `variation_digest` varchar(255) NOT NULL, UNIQUE INDEX `index_active_storage_variant_records_uniqueness` (`blob_id`, `variation_digest`), CONSTRAINT `fk_rails_993965df05`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211150451')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-11 16:04:50.659788', '2023-02-11 16:04:50.659788')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/v1/images" for 127.0.0.1 at 2023-02-11 16:05:15 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fd3ebfaa980 @tempfile=#<Tempfile:/tmp/RackMultipart20230211-2998658-9q3qge.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-11 16:05:15.579010', '2023-02-11 16:05:15.579010')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('lshu8n0585wv1tds0o6i8xnp5fc5', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-11 16:05:15.599378')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (3.8ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 1, 1, '2023-02-11 16:05:15.606064')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-11 16:05:15.612471' WHERE `images`.`id` = 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (2.5ms) [0m[32mUploaded file to key: lshu8n0585wv1tds0o6i8xnp5fc5 (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9eec9c35-5058-4f37-808f-6e4eeb81e766) to Async(default) with arguments: #<GlobalID:0x00007fd3eaa42228 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
Completed 200 OK in 66ms (Views: 0.3ms | ActiveRecord: 11.1ms | Allocations: 20009)


[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766] Performing ActiveStorage::AnalyzeJob (Job ID: 9eec9c35-5058-4f37-808f-6e4eeb81e766) from Async(default) enqueued at 2023-02-11T16:05:15Z with arguments: #<GlobalID:0x00007fd3ea81b918 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766]   [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9eec9c35-5058-4f37-808f-6e4eeb81e766] Performed ActiveStorage::AnalyzeJob (Job ID: 9eec9c35-5058-4f37-808f-6e4eeb81e766) from Async(default) in 7.41ms
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` ORDER BY `images`.`id` ASC LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (47.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (33.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (8.8ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (7.5ms)[0m  [1m[35mCREATE TABLE `images` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` longtext, `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20230211150451)
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE `active_storage_blobs` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `key` varchar(255) NOT NULL, `filename` varchar(255) NOT NULL, `content_type` varchar(255), `metadata` text, `service_name` varchar(255) NOT NULL, `byte_size` bigint NOT NULL, `checksum` varchar(255), `created_at` datetime(6) NOT NULL, UNIQUE INDEX `index_active_storage_blobs_on_key` (`key`))[0m
  [1m[35m (14.0ms)[0m  [1m[35mCREATE TABLE `active_storage_attachments` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) NOT NULL, `record_type` varchar(255) NOT NULL, `record_id` int NOT NULL, `blob_id` int NOT NULL, `created_at` datetime(6) NOT NULL, INDEX `index_active_storage_attachments_on_blob_id` (`blob_id`), UNIQUE INDEX `index_active_storage_attachments_uniqueness` (`record_type`, `record_id`, `name`, `blob_id`), CONSTRAINT `fk_rails_c3b3935057`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE `active_storage_variant_records` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `blob_id` int NOT NULL, `variation_digest` varchar(255) NOT NULL, UNIQUE INDEX `index_active_storage_variant_records_uniqueness` (`blob_id`, `variation_digest`), CONSTRAINT `fk_rails_993965df05`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211150451')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-14 10:55:27.184871', '2023-02-14 10:55:27.184871')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/v1/images" for 127.0.0.1 at 2023-02-14 11:25:16 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f7e598673e0 @tempfile=#<Tempfile:/tmp/RackMultipart20230214-713928-zh2z3r.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-14 11:25:16.615884', '2023-02-14 11:25:16.615884')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('17jpagugscg2fzkgwqt4ytrp3z17', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-14 11:25:16.624069')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.0ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 1, 1, '2023-02-14 11:25:16.630359')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-14 11:25:16.634366' WHERE `images`.`id` = 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 17jpagugscg2fzkgwqt4ytrp3z17 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 6b44d887-bab3-47f3-9b35-833fde3d1adb) to Async(default) with arguments: #<GlobalID:0x00007f7e5ae11240 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: 17jpagugscg2fzkgwqt4ytrp3z17[0m
Completed 200 OK in 47ms (Views: 3.1ms | ActiveRecord: 2.2ms | Allocations: 20109)


[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb] Performing ActiveStorage::AnalyzeJob (Job ID: 6b44d887-bab3-47f3-9b35-833fde3d1adb) from Async(default) enqueued at 2023-02-14T11:25:16Z with arguments: #<GlobalID:0x00007f7e58118d38 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6b44d887-bab3-47f3-9b35-833fde3d1adb] Performed ActiveStorage::AnalyzeJob (Job ID: 6b44d887-bab3-47f3-9b35-833fde3d1adb) from Async(default) in 5.28ms
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (29.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (2.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.5ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE `images` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `elbow_plot` varchar(255), `image` varchar(255), `clustered_image` longtext, `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20230211150451)
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE `active_storage_blobs` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `key` varchar(255) NOT NULL, `filename` varchar(255) NOT NULL, `content_type` varchar(255), `metadata` text, `service_name` varchar(255) NOT NULL, `byte_size` bigint NOT NULL, `checksum` varchar(255), `created_at` datetime(6) NOT NULL, UNIQUE INDEX `index_active_storage_blobs_on_key` (`key`))[0m
  [1m[35m (15.6ms)[0m  [1m[35mCREATE TABLE `active_storage_attachments` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) NOT NULL, `record_type` varchar(255) NOT NULL, `record_id` int NOT NULL, `blob_id` int NOT NULL, `created_at` datetime(6) NOT NULL, INDEX `index_active_storage_attachments_on_blob_id` (`blob_id`), UNIQUE INDEX `index_active_storage_attachments_uniqueness` (`record_type`, `record_id`, `name`, `blob_id`), CONSTRAINT `fk_rails_c3b3935057`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE `active_storage_variant_records` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `blob_id` int NOT NULL, `variation_digest` varchar(255) NOT NULL, UNIQUE INDEX `index_active_storage_variant_records_uniqueness` (`blob_id`, `variation_digest`), CONSTRAINT `fk_rails_993965df05`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211150451')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-14 11:26:01.042174', '2023-02-14 11:26:01.042174')[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started POST "/v1/images" for 127.0.0.1 at 2023-02-14 11:26:12 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007f7f48c560d8 @tempfile=#<Tempfile:/tmp/RackMultipart20230214-719463-4gefsv.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-14 11:26:12.145133', '2023-02-14 11:26:12.145133')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 1 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('agd2dahap4zts7tchg25po2na4ez', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-14 11:26:12.166736')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 1, 1, '2023-02-14 11:26:12.173598')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-14 11:26:12.182998' WHERE `images`.`id` = 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: agd2dahap4zts7tchg25po2na4ez (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4393424a-2045-48de-894a-d21ef8ad0ce8) to Async(default) with arguments: #<GlobalID:0x00007f7f481265f0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
[36m  Disk Storage (0.3ms) [0m[34mDownloaded file from key: agd2dahap4zts7tchg25po2na4ez[0m
Completed 200 OK in 54ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 20088)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 1 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8] Performing ActiveStorage::AnalyzeJob (Job ID: 4393424a-2045-48de-894a-d21ef8ad0ce8) from Async(default) enqueued at 2023-02-14T11:26:12Z with arguments: #<GlobalID:0x00007f7f48102d80 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8]   [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4393424a-2045-48de-894a-d21ef8ad0ce8] Performed ActiveStorage::AnalyzeJob (Job ID: 4393424a-2045-48de-894a-d21ef8ad0ce8) from Async(default) in 6.2ms
Started POST "/api/v1/images" for 127.0.0.1 at 2023-02-15 10:39:38 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/api/v1/images"):
  
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 10:40:24 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de63d940 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-2yt0tq.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 10:40:24.720520', '2023-02-15 10:40:24.720520')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 2 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 2 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('audgd9z51afdci6mc9qblp4kw61l', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 10:40:24.729153')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 2, 2, '2023-02-15 10:40:24.730929')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 10:40:24.731589' WHERE `images`.`id` = 2[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: audgd9z51afdci6mc9qblp4kw61l (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 25b26306-8c81-4839-8c46-5fa76edc517a) to Async(default) with arguments: #<GlobalID:0x00007ff6e009d0d8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/2>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: audgd9z51afdci6mc9qblp4kw61l[0m
Completed 200 OK in 57ms (Views: 0.3ms | ActiveRecord: 3.4ms | Allocations: 21410)


[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 2 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a] Performing ActiveStorage::AnalyzeJob (Job ID: 25b26306-8c81-4839-8c46-5fa76edc517a) from Async(default) enqueued at 2023-02-15T10:40:24Z with arguments: #<GlobalID:0x00007ff6dfc8d330 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 2[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [25b26306-8c81-4839-8c46-5fa76edc517a] Performed ActiveStorage::AnalyzeJob (Job ID: 25b26306-8c81-4839-8c46-5fa76edc517a) from Async(default) in 6.63ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 10:43:33 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfbbf638 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-1jv586.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 10:43:33.228122', '2023-02-15 10:43:33.228122')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 3 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.9ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 3 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('d6cojaeylkkjy8ug5o8i4vvnrelr', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 10:43:33.238382')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 3, 3, '2023-02-15 10:43:33.240261')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 10:43:33.241417' WHERE `images`.`id` = 3[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: d6cojaeylkkjy8ug5o8i4vvnrelr (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4161afc2-5446-4655-bc11-8705c4331582) to Async(default) with arguments: #<GlobalID:0x00007ff6de924b90 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/3>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: d6cojaeylkkjy8ug5o8i4vvnrelr[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 8049)


[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 3 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582] Performing ActiveStorage::AnalyzeJob (Job ID: 4161afc2-5446-4655-bc11-8705c4331582) from Async(default) enqueued at 2023-02-15T10:43:33Z with arguments: #<GlobalID:0x00007ff6de8edd48 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 3[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4161afc2-5446-4655-bc11-8705c4331582] Performed ActiveStorage::AnalyzeJob (Job ID: 4161afc2-5446-4655-bc11-8705c4331582) from Async(default) in 6.52ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 10:45:11 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de85b6c8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-sdl7xi.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 10:45:11.545987', '2023-02-15 10:45:11.545987')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 4 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 4 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('7o2epmk7090rvbx3j98ve6n67483', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 10:45:11.558855')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 4, 4, '2023-02-15 10:45:11.560508')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 10:45:11.561590' WHERE `images`.`id` = 4[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 7o2epmk7090rvbx3j98ve6n67483 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ce98b617-001b-46bf-be86-99fd6a08ef4c) to Async(default) with arguments: #<GlobalID:0x00007ff6de7b68f8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/4>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 7o2epmk7090rvbx3j98ve6n67483[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 7820)


[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 4 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c] Performing ActiveStorage::AnalyzeJob (Job ID: ce98b617-001b-46bf-be86-99fd6a08ef4c) from Async(default) enqueued at 2023-02-15T10:45:11Z with arguments: #<GlobalID:0x00007ff6de78c3a0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 4[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ce98b617-001b-46bf-be86-99fd6a08ef4c] Performed ActiveStorage::AnalyzeJob (Job ID: ce98b617-001b-46bf-be86-99fd6a08ef4c) from Async(default) in 8.18ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:07:37 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf9c740 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-c9cbw3.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:07:37.574977', '2023-02-15 12:07:37.574977')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 5 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 5 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('71xtb3tp2tjbu8enn7qytkjh3kvu', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:07:37.585063')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 5, 5, '2023-02-15 12:07:37.587034')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:07:37.588530' WHERE `images`.`id` = 5[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 71xtb3tp2tjbu8enn7qytkjh3kvu (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 82f3b07d-d97a-4d4e-bdff-5b2a5397c33e) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf50ae8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/5>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 71xtb3tp2tjbu8enn7qytkjh3kvu[0m
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 4.2ms | Allocations: 7950)


[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 5 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e] Performing ActiveStorage::AnalyzeJob (Job ID: 82f3b07d-d97a-4d4e-bdff-5b2a5397c33e) from Async(default) enqueued at 2023-02-15T12:07:37Z with arguments: #<GlobalID:0x00007ff6dcf3b2b0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 5[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e]   [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [82f3b07d-d97a-4d4e-bdff-5b2a5397c33e] Performed ActiveStorage::AnalyzeJob (Job ID: 82f3b07d-d97a-4d4e-bdff-5b2a5397c33e) from Async(default) in 14.15ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:09:02 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf046e8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-wpf4k3.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:09:02.773423', '2023-02-15 12:09:02.773423')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 6 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 6 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('wckjfzlwrf8jbiacox2bd4qfvv5d', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:09:02.778562')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 6, 6, '2023-02-15 12:09:02.779826')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:09:02.780742' WHERE `images`.`id` = 6[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: wckjfzlwrf8jbiacox2bd4qfvv5d (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a89975dc-e175-4761-95f9-852fd66e133f) to Async(default) with arguments: #<GlobalID:0x00007ff6dceb9be8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/6>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: wckjfzlwrf8jbiacox2bd4qfvv5d[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 7788)


[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 6 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f] Performing ActiveStorage::AnalyzeJob (Job ID: a89975dc-e175-4761-95f9-852fd66e133f) from Async(default) enqueued at 2023-02-15T12:09:02Z with arguments: #<GlobalID:0x00007ff6dcea4c98 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 6[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a89975dc-e175-4761-95f9-852fd66e133f] Performed ActiveStorage::AnalyzeJob (Job ID: a89975dc-e175-4761-95f9-852fd66e133f) from Async(default) in 13.12ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:14:23 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfcc7b20 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-iwik60.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:14:23.526379', '2023-02-15 12:14:23.526379')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 7 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 7 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('xhlst0cid2aloo7qmiyc0zh2tpmz', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:14:23.539294')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 7, 7, '2023-02-15 12:14:23.540225')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:14:23.541003' WHERE `images`.`id` = 7[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: xhlst0cid2aloo7qmiyc0zh2tpmz (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: afaf0ec1-c855-4838-8365-2a1b2c84c81a) to Async(default) with arguments: #<GlobalID:0x00007ff6e066aee8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/7>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: xhlst0cid2aloo7qmiyc0zh2tpmz[0m
Completed 200 OK in 20ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 7943)


[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 7 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a] Performing ActiveStorage::AnalyzeJob (Job ID: afaf0ec1-c855-4838-8365-2a1b2c84c81a) from Async(default) enqueued at 2023-02-15T12:14:23Z with arguments: #<GlobalID:0x00007ff6e0634960 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 7[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a]   [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [afaf0ec1-c855-4838-8365-2a1b2c84c81a] Performed ActiveStorage::AnalyzeJob (Job ID: afaf0ec1-c855-4838-8365-2a1b2c84c81a) from Async(default) in 8.86ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:14:45 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de8f0ae8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-h28dms.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:14:45.436981', '2023-02-15 12:14:45.436981')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 8 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 8 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('6laeviyv0dzp24h7zuv2khn7mrop', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:14:45.444680')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 8, 8, '2023-02-15 12:14:45.445451')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:14:45.445968' WHERE `images`.`id` = 8[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 6laeviyv0dzp24h7zuv2khn7mrop (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 48b777d1-863f-465f-889b-2260e76e1f4f) to Async(default) with arguments: #<GlobalID:0x00007ff6de8080e0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/8>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: 6laeviyv0dzp24h7zuv2khn7mrop[0m
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 2.5ms | Allocations: 7784)


[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 8 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f] Performing ActiveStorage::AnalyzeJob (Job ID: 48b777d1-863f-465f-889b-2260e76e1f4f) from Async(default) enqueued at 2023-02-15T12:14:45Z with arguments: #<GlobalID:0x00007ff6de7c3008 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 8[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [48b777d1-863f-465f-889b-2260e76e1f4f] Performed ActiveStorage::AnalyzeJob (Job ID: 48b777d1-863f-465f-889b-2260e76e1f4f) from Async(default) in 6.87ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:15:52 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de76f160 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-ubconl.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.7ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:15:52.447817', '2023-02-15 12:15:52.447817')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 9 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 9 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('7f7qdvvdqqy0h7skrt8uk76iymhi', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:15:52.458923')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 9, 9, '2023-02-15 12:15:52.460661')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:15:52.462114' WHERE `images`.`id` = 9[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 7f7qdvvdqqy0h7skrt8uk76iymhi (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8266afd7-efd3-4fe2-9c1f-ef91424b866d) to Async(default) with arguments: #<GlobalID:0x00007ff6de6e0f28 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/9>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 7f7qdvvdqqy0h7skrt8uk76iymhi[0m
Completed 200 OK in 24ms (Views: 0.3ms | ActiveRecord: 7.0ms | Allocations: 7807)


[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d]   [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 9 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d] Performing ActiveStorage::AnalyzeJob (Job ID: 8266afd7-efd3-4fe2-9c1f-ef91424b866d) from Async(default) enqueued at 2023-02-15T12:15:52Z with arguments: #<GlobalID:0x00007ff6de6b5788 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 9[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d]   [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8266afd7-efd3-4fe2-9c1f-ef91424b866d] Performed ActiveStorage::AnalyzeJob (Job ID: 8266afd7-efd3-4fe2-9c1f-ef91424b866d) from Async(default) in 19.09ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:16:30 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1e3b98 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-lylgj1.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:16:30.407942', '2023-02-15 12:16:30.407942')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 10 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 10 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jfzxzi3lzrm881byai3oe22skaa0', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:16:30.414485')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 10, 10, '2023-02-15 12:16:30.415177')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:16:30.415766' WHERE `images`.`id` = 10[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: jfzxzi3lzrm881byai3oe22skaa0 (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d1530115-cc15-4ff6-9d80-3c09715da6f9) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf92998 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/10>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: jfzxzi3lzrm881byai3oe22skaa0[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 7796)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 10 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9] Performing ActiveStorage::AnalyzeJob (Job ID: d1530115-cc15-4ff6-9d80-3c09715da6f9) from Async(default) enqueued at 2023-02-15T12:16:30Z with arguments: #<GlobalID:0x00007ff6dcf75938 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/10>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 10[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9]   [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1530115-cc15-4ff6-9d80-3c09715da6f9] Performed ActiveStorage::AnalyzeJob (Job ID: d1530115-cc15-4ff6-9d80-3c09715da6f9) from Async(default) in 7.67ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:17:32 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf4f0a8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-scekqi.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:17:32.427211', '2023-02-15 12:17:32.427211')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 11 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 11 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('youfg4ys2thlmmqex73ksizhu4j8', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:17:32.437846')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 11, 11, '2023-02-15 12:17:32.439728')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:17:32.441192' WHERE `images`.`id` = 11[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.7ms) [0m[32mUploaded file to key: youfg4ys2thlmmqex73ksizhu4j8 (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 6500531f-2ec0-4d94-a1e7-c9af0384c10d) to Async(default) with arguments: #<GlobalID:0x00007ff6dcedab40 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/11>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: youfg4ys2thlmmqex73ksizhu4j8[0m
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 3.4ms | Allocations: 7799)


[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 11 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d] Performing ActiveStorage::AnalyzeJob (Job ID: 6500531f-2ec0-4d94-a1e7-c9af0384c10d) from Async(default) enqueued at 2023-02-15T12:17:32Z with arguments: #<GlobalID:0x00007ff6dceedbc8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/11>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 11[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6500531f-2ec0-4d94-a1e7-c9af0384c10d] Performed ActiveStorage::AnalyzeJob (Job ID: 6500531f-2ec0-4d94-a1e7-c9af0384c10d) from Async(default) in 9.22ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:18:29 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcea2560 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-vv48kb.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:18:29.587280', '2023-02-15 12:18:29.587280')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 12 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 12 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('nig613celp4cgmueo2h6ciy3m1gv', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:18:29.599869')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 12, 12, '2023-02-15 12:18:29.601515')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:18:29.602558' WHERE `images`.`id` = 12[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: nig613celp4cgmueo2h6ciy3m1gv (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: fd36779b-b95b-4561-b2b6-c9686a11d8ed) to Async(default) with arguments: #<GlobalID:0x00007ff6dfc37a98 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/12>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: nig613celp4cgmueo2h6ciy3m1gv[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 5.3ms | Allocations: 7794)


[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 12 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed] Performing ActiveStorage::AnalyzeJob (Job ID: fd36779b-b95b-4561-b2b6-c9686a11d8ed) from Async(default) enqueued at 2023-02-15T12:18:29Z with arguments: #<GlobalID:0x00007ff6df16b060 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/12>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 12[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [fd36779b-b95b-4561-b2b6-c9686a11d8ed] Performed ActiveStorage::AnalyzeJob (Job ID: fd36779b-b95b-4561-b2b6-c9686a11d8ed) from Async(default) in 10.02ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:20:09 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6e062a078 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-6j0v9z.png>, @original_filename="sk-logo.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"sk-logo.png\"\r\nContent-Type: image/png\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'sk-logo.png', NULL, NULL, NULL, NULL, '2023-02-15 12:20:09.712565', '2023-02-15 12:20:09.712565')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 13 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 13 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('9k1ycj3kmb0gm1yvfdglrithf5hr', 'sk-logo.png', 'image/png', '{\"identified\":true}', 'local', 2472, 'qsJmdw7iQIQWaFOBn8kZ7g==', '2023-02-15 12:20:09.723037')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 13, 13, '2023-02-15 12:20:09.725207')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:20:09.726477' WHERE `images`.`id` = 13[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 9k1ycj3kmb0gm1yvfdglrithf5hr (checksum: qsJmdw7iQIQWaFOBn8kZ7g==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e2ae2fba-ac04-4746-bb2b-6d52f082e4f5) to Async(default) with arguments: #<GlobalID:0x00007ff6de8b98e0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/13>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: 9k1ycj3kmb0gm1yvfdglrithf5hr[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 7780)


[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 13 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5] Performing ActiveStorage::AnalyzeJob (Job ID: e2ae2fba-ac04-4746-bb2b-6d52f082e4f5) from Async(default) enqueued at 2023-02-15T12:20:09Z with arguments: #<GlobalID:0x00007ff6de890490 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/13>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 13[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5]   [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2ae2fba-ac04-4746-bb2b-6d52f082e4f5] Performed ActiveStorage::AnalyzeJob (Job ID: e2ae2fba-ac04-4746-bb2b-6d52f082e4f5) from Async(default) in 10.2ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:34:22 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de7a1278 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-xf6n8h.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 12:34:22.440535', '2023-02-15 12:34:22.440535')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 14 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 14 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jvmjqvjgy1ocv7qjwxyho3n3zafo', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 12:34:22.445588')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 14, 14, '2023-02-15 12:34:22.448035')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:34:22.450170' WHERE `images`.`id` = 14[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: jvmjqvjgy1ocv7qjwxyho3n3zafo (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e2c4a3fc-f892-424b-abe4-ab4255892218) to Async(default) with arguments: #<GlobalID:0x00007ff6de726280 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/14>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: jvmjqvjgy1ocv7qjwxyho3n3zafo[0m
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 3.1ms | Allocations: 8039)


[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 14 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218] Performing ActiveStorage::AnalyzeJob (Job ID: e2c4a3fc-f892-424b-abe4-ab4255892218) from Async(default) enqueued at 2023-02-15T12:34:22Z with arguments: #<GlobalID:0x00007ff6de69fac8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/14>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 14[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e2c4a3fc-f892-424b-abe4-ab4255892218] Performed ActiveStorage::AnalyzeJob (Job ID: e2c4a3fc-f892-424b-abe4-ab4255892218) from Async(default) in 13.14ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:41:52 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1e44d0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-yxep1y.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 12:41:52.747424', '2023-02-15 12:41:52.747424')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 15 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 15 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('g264xlng3ke4fpnk7r6uho9fw0k3', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 12:41:52.753941')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 15, 15, '2023-02-15 12:41:52.754731')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:41:52.755333' WHERE `images`.`id` = 15[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: g264xlng3ke4fpnk7r6uho9fw0k3 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 280bdb42-2c67-4b69-b3dc-bac25ac6b8a0) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf94bf8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/15>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: g264xlng3ke4fpnk7r6uho9fw0k3[0m
Completed 200 OK in 13ms (Views: 0.1ms | ActiveRecord: 3.3ms | Allocations: 7919)


[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 15 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0] Performing ActiveStorage::AnalyzeJob (Job ID: 280bdb42-2c67-4b69-b3dc-bac25ac6b8a0) from Async(default) enqueued at 2023-02-15T12:41:52Z with arguments: #<GlobalID:0x00007ff6dcf7f320 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/15>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 15[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0]   [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [280bdb42-2c67-4b69-b3dc-bac25ac6b8a0] Performed ActiveStorage::AnalyzeJob (Job ID: 280bdb42-2c67-4b69-b3dc-bac25ac6b8a0) from Async(default) in 8.97ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 12:49:23 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf2d728 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-kf1fkm.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 12:49:23.407257', '2023-02-15 12:49:23.407257')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 16 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 16 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('2j87ws16jkcstz1kv45hesoiqidk', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 12:49:23.418758')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 16, 16, '2023-02-15 12:49:23.420678')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 12:49:23.421817' WHERE `images`.`id` = 16[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 2j87ws16jkcstz1kv45hesoiqidk (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d169313c-78f1-4c15-8fb5-1273cf289f4a) to Async(default) with arguments: #<GlobalID:0x00007ff6dcee95f0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/16>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 2j87ws16jkcstz1kv45hesoiqidk[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 7965)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 16 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a] Performing ActiveStorage::AnalyzeJob (Job ID: d169313c-78f1-4c15-8fb5-1273cf289f4a) from Async(default) enqueued at 2023-02-15T12:49:23Z with arguments: #<GlobalID:0x00007ff6dcecc658 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/16>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 16[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d169313c-78f1-4c15-8fb5-1273cf289f4a] Performed ActiveStorage::AnalyzeJob (Job ID: d169313c-78f1-4c15-8fb5-1273cf289f4a) from Async(default) in 6.83ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:10:30 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfef81d8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-i8o3xw.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:10:30.175245', '2023-02-15 13:10:30.175245')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 17 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 17 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('u09b424vxss2kdt76sece1qqhc35', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:10:30.183789')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 17, 17, '2023-02-15 13:10:30.184931')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:10:30.186039' WHERE `images`.`id` = 17[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: u09b424vxss2kdt76sece1qqhc35 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d1f036d7-47ff-43a6-a1cd-1fb70569c822) to Async(default) with arguments: #<GlobalID:0x00007ff6e06d1ff8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/17>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: u09b424vxss2kdt76sece1qqhc35[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 7916)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 17 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822] Performing ActiveStorage::AnalyzeJob (Job ID: d1f036d7-47ff-43a6-a1cd-1fb70569c822) from Async(default) enqueued at 2023-02-15T13:10:30Z with arguments: #<GlobalID:0x00007ff6e065d4a0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/17>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 17[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d1f036d7-47ff-43a6-a1cd-1fb70569c822] Performed ActiveStorage::AnalyzeJob (Job ID: d1f036d7-47ff-43a6-a1cd-1fb70569c822) from Async(default) in 7.52ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:31:03 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de8a5f98 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-l6vmbv.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:31:03.164438', '2023-02-15 13:31:03.164438')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 18 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 18 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('q3wj6ekf8izy92uhbqhu18287qiy', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:31:03.173307')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 18, 18, '2023-02-15 13:31:03.174709')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:31:03.175778' WHERE `images`.`id` = 18[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: q3wj6ekf8izy92uhbqhu18287qiy (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d001689c-2756-4033-8e02-5bff5971f8cd) to Async(default) with arguments: #<GlobalID:0x00007ff6de839d20 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/18>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: q3wj6ekf8izy92uhbqhu18287qiy[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 4.9ms | Allocations: 8001)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 18 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd] Performing ActiveStorage::AnalyzeJob (Job ID: d001689c-2756-4033-8e02-5bff5971f8cd) from Async(default) enqueued at 2023-02-15T13:31:03Z with arguments: #<GlobalID:0x00007ff6de7dfbe0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/18>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd]   [1m[36mActiveStorage::Blob Update (0.8ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 18[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d001689c-2756-4033-8e02-5bff5971f8cd] Performed ActiveStorage::AnalyzeJob (Job ID: d001689c-2756-4033-8e02-5bff5971f8cd) from Async(default) in 10.81ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:32:39 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de73b180 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-ue89qv.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:32:39.962492', '2023-02-15 13:32:39.962492')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 19 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 19 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (1.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('dolrvrk2fpec4bw9snvibd46s12q', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:32:39.965822')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 19, 19, '2023-02-15 13:32:39.967660')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:32:39.968261' WHERE `images`.`id` = 19[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: dolrvrk2fpec4bw9snvibd46s12q (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 5b613264-cc83-490e-b00e-6f7825c609b3) to Async(default) with arguments: #<GlobalID:0x00007ff6de656648 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/19>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: dolrvrk2fpec4bw9snvibd46s12q[0m
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 3.2ms | Allocations: 7808)


[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 19 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3] Performing ActiveStorage::AnalyzeJob (Job ID: 5b613264-cc83-490e-b00e-6f7825c609b3) from Async(default) enqueued at 2023-02-15T13:32:39Z with arguments: #<GlobalID:0x00007ff6dd1fdc50 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/19>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 19[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [5b613264-cc83-490e-b00e-6f7825c609b3] Performed ActiveStorage::AnalyzeJob (Job ID: 5b613264-cc83-490e-b00e-6f7825c609b3) from Async(default) in 6.93ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:33:36 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1c9ba8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-9lph2i.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:33:36.967738', '2023-02-15 13:33:36.967738')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 20 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 20 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('2zy59hn5jksr9q7ien5rfave5eon', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:33:36.976042')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 20, 20, '2023-02-15 13:33:36.977614')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:33:36.978973' WHERE `images`.`id` = 20[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 2zy59hn5jksr9q7ien5rfave5eon (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8df997f3-d2f5-4cda-af8a-4af4eab07ee3) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf78070 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/20>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 2zy59hn5jksr9q7ien5rfave5eon[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.7ms | Allocations: 7819)


[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 20 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3] Performing ActiveStorage::AnalyzeJob (Job ID: 8df997f3-d2f5-4cda-af8a-4af4eab07ee3) from Async(default) enqueued at 2023-02-15T13:33:36Z with arguments: #<GlobalID:0x00007ff6dcf62770 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/20>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 20[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3]   [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8df997f3-d2f5-4cda-af8a-4af4eab07ee3] Performed ActiveStorage::AnalyzeJob (Job ID: 8df997f3-d2f5-4cda-af8a-4af4eab07ee3) from Async(default) in 11.26ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:35:49 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf09788 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-ovf17c.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:35:49.715220', '2023-02-15 13:35:49.715220')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 21 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 21 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('rovt1gkg20buoyg052scwgfu5isz', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:35:49.724549')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 21, 21, '2023-02-15 13:35:49.726642')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:35:49.728060' WHERE `images`.`id` = 21[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: rovt1gkg20buoyg052scwgfu5isz (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b5ef9515-792c-4fe5-bc3a-9389f5273651) to Async(default) with arguments: #<GlobalID:0x00007ff6dcec5cb8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/21>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: rovt1gkg20buoyg052scwgfu5isz[0m
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 3.0ms | Allocations: 7807)


[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 21 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651] Performing ActiveStorage::AnalyzeJob (Job ID: b5ef9515-792c-4fe5-bc3a-9389f5273651) from Async(default) enqueued at 2023-02-15T13:35:49Z with arguments: #<GlobalID:0x00007ff6dcea8ca8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/21>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 21[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b5ef9515-792c-4fe5-bc3a-9389f5273651] Performed ActiveStorage::AnalyzeJob (Job ID: b5ef9515-792c-4fe5-bc3a-9389f5273651) from Async(default) in 14.58ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:37:09 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfd311d8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-jlics1.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:37:09.467591', '2023-02-15 13:37:09.467591')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 22 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 22 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('sp9q73a4fsk51byq8bb4n23nmk5a', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:37:09.477827')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 22, 22, '2023-02-15 13:37:09.479282')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:37:09.480595' WHERE `images`.`id` = 22[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: sp9q73a4fsk51byq8bb4n23nmk5a (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 914e5868-8a16-418f-9469-17e259b66fdc) to Async(default) with arguments: #<GlobalID:0x00007ff6dfbbe850 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/22>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: sp9q73a4fsk51byq8bb4n23nmk5a[0m
Completed 200 OK in 22ms (Views: 0.4ms | ActiveRecord: 3.8ms | Allocations: 7796)


[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc]   [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 22 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc] Performing ActiveStorage::AnalyzeJob (Job ID: 914e5868-8a16-418f-9469-17e259b66fdc) from Async(default) enqueued at 2023-02-15T13:37:09Z with arguments: #<GlobalID:0x00007ff6e07a06a0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/22>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 22[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc]   [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [914e5868-8a16-418f-9469-17e259b66fdc] Performed ActiveStorage::AnalyzeJob (Job ID: 914e5868-8a16-418f-9469-17e259b66fdc) from Async(default) in 10.37ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:38:52 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de916e28 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-g9j97z.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:38:52.894303', '2023-02-15 13:38:52.894303')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 23 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 23 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('lbdvpg99d6p9xtbgzql0g9wpjf7m', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:38:52.904874')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 23, 23, '2023-02-15 13:38:52.906326')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:38:52.907498' WHERE `images`.`id` = 23[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: lbdvpg99d6p9xtbgzql0g9wpjf7m (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b4edd00f-5601-4b94-90e7-3fdb6c4e55e7) to Async(default) with arguments: #<GlobalID:0x00007ff6de848780 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/23>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: lbdvpg99d6p9xtbgzql0g9wpjf7m[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 7808)


[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 23 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7] Performing ActiveStorage::AnalyzeJob (Job ID: b4edd00f-5601-4b94-90e7-3fdb6c4e55e7) from Async(default) enqueued at 2023-02-15T13:38:52Z with arguments: #<GlobalID:0x00007ff6de7efbf8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/23>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 23[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b4edd00f-5601-4b94-90e7-3fdb6c4e55e7] Performed ActiveStorage::AnalyzeJob (Job ID: b4edd00f-5601-4b94-90e7-3fdb6c4e55e7) from Async(default) in 9.13ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:39:50 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de7a0df0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-oqv10z.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:39:50.761745', '2023-02-15 13:39:50.761745')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 24 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 24 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('2jeg4xn9962k7206wy1odqmtth6g', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:39:50.766112')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 24, 24, '2023-02-15 13:39:50.767949')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:39:50.769299' WHERE `images`.`id` = 24[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 2jeg4xn9962k7206wy1odqmtth6g (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b9eea98d-6013-4e2b-90c8-03fc152d4729) to Async(default) with arguments: #<GlobalID:0x00007ff6de6ba5f8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/24>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 2jeg4xn9962k7206wy1odqmtth6g[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 2.1ms | Allocations: 7798)


[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729]   [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 24 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729] Performing ActiveStorage::AnalyzeJob (Job ID: b9eea98d-6013-4e2b-90c8-03fc152d4729) from Async(default) enqueued at 2023-02-15T13:39:50Z with arguments: #<GlobalID:0x00007ff6de68b820 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/24>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729]   [1m[36mActiveStorage::Blob Update (0.4ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 24[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b9eea98d-6013-4e2b-90c8-03fc152d4729] Performed ActiveStorage::AnalyzeJob (Job ID: b9eea98d-6013-4e2b-90c8-03fc152d4729) from Async(default) in 15.53ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 13:45:05 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de644d30 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-c7qtas.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.7ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 13:45:05.622213', '2023-02-15 13:45:05.622213')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 25 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 25 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('teke19t1nzpr8vn7gl6st95q96kp', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 13:45:05.632554')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 25, 25, '2023-02-15 13:45:05.634308')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 13:45:05.635519' WHERE `images`.`id` = 25[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: teke19t1nzpr8vn7gl6st95q96kp (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 60371324-06da-45f1-923c-7ecba8ad6b66) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf88448 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/25>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: teke19t1nzpr8vn7gl6st95q96kp[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 7808)


[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 25 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66] Performing ActiveStorage::AnalyzeJob (Job ID: 60371324-06da-45f1-923c-7ecba8ad6b66) from Async(default) enqueued at 2023-02-15T13:45:05Z with arguments: #<GlobalID:0x00007ff6dcf73368 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/25>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 25[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60371324-06da-45f1-923c-7ecba8ad6b66] Performed ActiveStorage::AnalyzeJob (Job ID: 60371324-06da-45f1-923c-7ecba8ad6b66) from Async(default) in 8.55ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:10:11 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf0c9d8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-jlta8c.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:10:11.758698', '2023-02-15 14:10:11.758698')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 26 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 26 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('vk4wtoy6v9c5orcu36hvu8dahvn2', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:10:11.767697')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 26, 26, '2023-02-15 14:10:11.769626')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:10:11.770725' WHERE `images`.`id` = 26[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: vk4wtoy6v9c5orcu36hvu8dahvn2 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 60b1059c-2323-4dea-a854-827ee1808bd9) to Async(default) with arguments: #<GlobalID:0x00007ff6dcecfad8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/26>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: vk4wtoy6v9c5orcu36hvu8dahvn2[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 7916)


[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 26 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9] Performing ActiveStorage::AnalyzeJob (Job ID: 60b1059c-2323-4dea-a854-827ee1808bd9) from Async(default) enqueued at 2023-02-15T14:10:11Z with arguments: #<GlobalID:0x00007ff6dceb2118 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/26>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 26[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9]   [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [60b1059c-2323-4dea-a854-827ee1808bd9] Performed ActiveStorage::AnalyzeJob (Job ID: 60b1059c-2323-4dea-a854-827ee1808bd9) from Async(default) in 9.93ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:40:50 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6e07dcce0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-30gpof.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:40:50.763117', '2023-02-15 14:40:50.763117')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 27 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 27 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('69uw0sg97ghwmdviygm08r1x4z21', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:40:50.771009')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 27, 27, '2023-02-15 14:40:50.772141')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:40:50.772893' WHERE `images`.`id` = 27[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 69uw0sg97ghwmdviygm08r1x4z21 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d52f27dc-ea20-46fa-9017-f9cb26f47231) to Async(default) with arguments: #<GlobalID:0x00007ff6e06440e0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/27>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: 69uw0sg97ghwmdviygm08r1x4z21[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 7911)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 27 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231] Performing ActiveStorage::AnalyzeJob (Job ID: d52f27dc-ea20-46fa-9017-f9cb26f47231) from Async(default) enqueued at 2023-02-15T14:40:50Z with arguments: #<GlobalID:0x00007ff6de922200 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/27>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231]   [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 27[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d52f27dc-ea20-46fa-9017-f9cb26f47231] Performed ActiveStorage::AnalyzeJob (Job ID: d52f27dc-ea20-46fa-9017-f9cb26f47231) from Async(default) in 6.46ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:46:53 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de893e38 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-ljqu7s.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:46:53.403628', '2023-02-15 14:46:53.403628')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 28 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 28 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jpoeuztae4m3fll6dyq6odlxgynb', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:46:53.417910')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 28, 28, '2023-02-15 14:46:53.421314')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.4ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:46:53.423358' WHERE `images`.`id` = 28[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: jpoeuztae4m3fll6dyq6odlxgynb (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 03387a3f-3ccf-41f1-a769-42a4b817714e) to Async(default) with arguments: #<GlobalID:0x00007ff6de794730 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/28>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: jpoeuztae4m3fll6dyq6odlxgynb[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 4.4ms | Allocations: 7927)


[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 28 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e] Performing ActiveStorage::AnalyzeJob (Job ID: 03387a3f-3ccf-41f1-a769-42a4b817714e) from Async(default) enqueued at 2023-02-15T14:46:53Z with arguments: #<GlobalID:0x00007ff6de773558 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/28>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 28[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e]   [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [03387a3f-3ccf-41f1-a769-42a4b817714e] Performed ActiveStorage::AnalyzeJob (Job ID: 03387a3f-3ccf-41f1-a769-42a4b817714e) from Async(default) in 11.2ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:48:56 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de6c3018 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-wukwah.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:48:56.019730', '2023-02-15 14:48:56.019730')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 29 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.8ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 29 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('z8gl5ee1jsg45uu6qpvrln0qcbsj', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:48:56.033910')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 29, 29, '2023-02-15 14:48:56.038272')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.4ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:48:56.040794' WHERE `images`.`id` = 29[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: z8gl5ee1jsg45uu6qpvrln0qcbsj (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: cb2f5435-a332-4c91-9427-6aa66474e8ed) to Async(default) with arguments: #<GlobalID:0x00007ff6de6340e8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/29>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: z8gl5ee1jsg45uu6qpvrln0qcbsj[0m
Completed 200 OK in 30ms (Views: 0.3ms | ActiveRecord: 5.0ms | Allocations: 7795)


[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 29 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed] Performing ActiveStorage::AnalyzeJob (Job ID: cb2f5435-a332-4c91-9427-6aa66474e8ed) from Async(default) enqueued at 2023-02-15T14:48:56Z with arguments: #<GlobalID:0x00007ff6dd1e4cc8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/29>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 29[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed]   [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [cb2f5435-a332-4c91-9427-6aa66474e8ed] Performed ActiveStorage::AnalyzeJob (Job ID: cb2f5435-a332-4c91-9427-6aa66474e8ed) from Async(default) in 11.29ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:51:09 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf81a30 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-4wdgbm.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:51:09.600204', '2023-02-15 14:51:09.600204')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 30 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 30 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jiqhct7u3r3q8gi86djqyyy21h34', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:51:09.607211')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 30, 30, '2023-02-15 14:51:09.609059')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:51:09.610326' WHERE `images`.`id` = 30[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: jiqhct7u3r3q8gi86djqyyy21h34 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf3ea78 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/30>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: jiqhct7u3r3q8gi86djqyyy21h34[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 3.8ms | Allocations: 7790)


[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 30 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b] Performing ActiveStorage::AnalyzeJob (Job ID: 284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b) from Async(default) enqueued at 2023-02-15T14:51:09Z with arguments: #<GlobalID:0x00007ff6dcf211f8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/30>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 30[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b]   [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b] Performed ActiveStorage::AnalyzeJob (Job ID: 284f4d1c-a3eb-49b2-a8c6-42fd2238ea2b) from Async(default) in 12.58ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:51:58 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcef9770 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-77lwlg.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:51:58.832366', '2023-02-15 14:51:58.832366')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 31 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 31 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('bdud0g0xa55enybeage6lxt4ir5u', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:51:58.835690')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 31, 31, '2023-02-15 14:51:58.836478')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:51:58.837117' WHERE `images`.`id` = 31[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.1ms) [0m[32mUploaded file to key: bdud0g0xa55enybeage6lxt4ir5u (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 52b6f374-5ee2-4166-a865-00651804f038) to Async(default) with arguments: #<GlobalID:0x00007ff6dceb5110 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/31>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: bdud0g0xa55enybeage6lxt4ir5u[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 7780)


[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 31 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038] Performing ActiveStorage::AnalyzeJob (Job ID: 52b6f374-5ee2-4166-a865-00651804f038) from Async(default) enqueued at 2023-02-15T14:51:58Z with arguments: #<GlobalID:0x00007ff6e057c5e0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/31>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 31[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038]   [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [52b6f374-5ee2-4166-a865-00651804f038] Performed ActiveStorage::AnalyzeJob (Job ID: 52b6f374-5ee2-4166-a865-00651804f038) from Async(default) in 10.16ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 14:52:43 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfcf05c0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-if04nh.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 14:52:43.052749', '2023-02-15 14:52:43.052749')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 32 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 32 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('5xb96dv3tdwi8t0ao2jus1mer6z9', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 14:52:43.061715')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 32, 32, '2023-02-15 14:52:43.063469')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 14:52:43.064593' WHERE `images`.`id` = 32[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 5xb96dv3tdwi8t0ao2jus1mer6z9 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 714c0e05-032b-4f4d-9280-852f190ec876) to Async(default) with arguments: #<GlobalID:0x00007ff6e06736b0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/32>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: 5xb96dv3tdwi8t0ao2jus1mer6z9[0m
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 3.9ms | Allocations: 7822)


[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 32 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876] Performing ActiveStorage::AnalyzeJob (Job ID: 714c0e05-032b-4f4d-9280-852f190ec876) from Async(default) enqueued at 2023-02-15T14:52:43Z with arguments: #<GlobalID:0x00007ff6e063b170 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/32>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 32[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876]   [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [714c0e05-032b-4f4d-9280-852f190ec876] Performed ActiveStorage::AnalyzeJob (Job ID: 714c0e05-032b-4f4d-9280-852f190ec876) from Async(default) in 9.06ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:01:36 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de8bbf00 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-4twqor.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:01:36.220208', '2023-02-15 15:01:36.220208')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 33 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 33 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('cq3w5mm30bziodxh3hsjrx8z74dx', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:01:36.226492')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 33, 33, '2023-02-15 15:01:36.228312')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:01:36.229379' WHERE `images`.`id` = 33[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: cq3w5mm30bziodxh3hsjrx8z74dx (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a95ac5da-481a-4371-b57f-e95461aa92ac) to Async(default) with arguments: #<GlobalID:0x00007ff6de7bd888 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/33>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: cq3w5mm30bziodxh3hsjrx8z74dx[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 7943)


[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 33 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac] Performing ActiveStorage::AnalyzeJob (Job ID: a95ac5da-481a-4371-b57f-e95461aa92ac) from Async(default) enqueued at 2023-02-15T15:01:36Z with arguments: #<GlobalID:0x00007ff6de795568 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/33>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 33[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95ac5da-481a-4371-b57f-e95461aa92ac] Performed ActiveStorage::AnalyzeJob (Job ID: a95ac5da-481a-4371-b57f-e95461aa92ac) from Async(default) in 9.29ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:02:29 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de75f530 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-orrf6q.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:02:29.250307', '2023-02-15 15:02:29.250307')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 34 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 34 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('xuwhpqmaofzsrzq9vvza7diott3a', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:02:29.259488')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 34, 34, '2023-02-15 15:02:29.262715')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:02:29.265501' WHERE `images`.`id` = 34[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: xuwhpqmaofzsrzq9vvza7diott3a (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d98e80a9-fc59-4eb2-946b-f881e6b034bd) to Async(default) with arguments: #<GlobalID:0x00007ff6de65d920 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/34>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: xuwhpqmaofzsrzq9vvza7diott3a[0m
Completed 200 OK in 25ms (Views: 0.5ms | ActiveRecord: 3.0ms | Allocations: 7809)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 34 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd] Performing ActiveStorage::AnalyzeJob (Job ID: d98e80a9-fc59-4eb2-946b-f881e6b034bd) from Async(default) enqueued at 2023-02-15T15:02:29Z with arguments: #<GlobalID:0x00007ff6dd2014e0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/34>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 34[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd]   [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d98e80a9-fc59-4eb2-946b-f881e6b034bd] Performed ActiveStorage::AnalyzeJob (Job ID: d98e80a9-fc59-4eb2-946b-f881e6b034bd) from Async(default) in 12.7ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:14:59 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1ac0d0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-k6uc57.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:14:59.108416', '2023-02-15 15:14:59.108416')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 35 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('dqh3l6rvvukl7mscphmhylozcful', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:14:59.121924')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 35, 35, '2023-02-15 15:14:59.124380')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:14:59.126328' WHERE `images`.`id` = 35[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: dqh3l6rvvukl7mscphmhylozcful (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1fc9c3a3-786c-464c-99ce-2e9069dbe6c0) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf3bb70 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/35>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: dqh3l6rvvukl7mscphmhylozcful[0m
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 7919)


[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 35 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0] Performing ActiveStorage::AnalyzeJob (Job ID: 1fc9c3a3-786c-464c-99ce-2e9069dbe6c0) from Async(default) enqueued at 2023-02-15T15:14:59Z with arguments: #<GlobalID:0x00007ff6dcf4e220 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/35>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 35[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0]   [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1fc9c3a3-786c-464c-99ce-2e9069dbe6c0] Performed ActiveStorage::AnalyzeJob (Job ID: 1fc9c3a3-786c-464c-99ce-2e9069dbe6c0) from Async(default) in 10.55ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:16:55 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcef5238 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-a593iu.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:16:55.986273', '2023-02-15 15:16:55.986273')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 36 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 36 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('9da1ob43s0beohdak316lyccws5y', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:16:55.995416')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 36, 36, '2023-02-15 15:16:55.999627')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:16:56.002010' WHERE `images`.`id` = 36[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: 9da1ob43s0beohdak316lyccws5y (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 43a78dc1-9203-4b3d-922e-cc1f2f340638) to Async(default) with arguments: #<GlobalID:0x00007ff6dceb12b8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/36>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: 9da1ob43s0beohdak316lyccws5y[0m
Completed 200 OK in 26ms (Views: 0.5ms | ActiveRecord: 3.5ms | Allocations: 7798)


[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 36 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638] Performing ActiveStorage::AnalyzeJob (Job ID: 43a78dc1-9203-4b3d-922e-cc1f2f340638) from Async(default) enqueued at 2023-02-15T15:16:56Z with arguments: #<GlobalID:0x00007ff6e00f4d60 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/36>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 36[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638]   [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [43a78dc1-9203-4b3d-922e-cc1f2f340638] Performed ActiveStorage::AnalyzeJob (Job ID: 43a78dc1-9203-4b3d-922e-cc1f2f340638) from Async(default) in 18.18ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:17:53 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfcd1fd0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-8l6ttx.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:17:53.784076', '2023-02-15 15:17:53.784076')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 37 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 37 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('0cn7pxoprrjsvr2h248qlm3uz660', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:17:53.790823')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 37, 37, '2023-02-15 15:17:53.792772')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:17:53.794049' WHERE `images`.`id` = 37[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 0cn7pxoprrjsvr2h248qlm3uz660 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a6b9b816-1890-4514-b572-ce1bec6692b8) to Async(default) with arguments: #<GlobalID:0x00007ff6e0661168 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/37>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 0cn7pxoprrjsvr2h248qlm3uz660[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 7813)


[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 37 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8] Performing ActiveStorage::AnalyzeJob (Job ID: a6b9b816-1890-4514-b572-ce1bec6692b8) from Async(default) enqueued at 2023-02-15T15:17:53Z with arguments: #<GlobalID:0x00007ff6e062c698 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/37>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 37[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a6b9b816-1890-4514-b572-ce1bec6692b8] Performed ActiveStorage::AnalyzeJob (Job ID: a6b9b816-1890-4514-b572-ce1bec6692b8) from Async(default) in 8.7ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:19:51 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de8a38b0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-cfbge0.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:19:51.872921', '2023-02-15 15:19:51.872921')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 38 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('qnmegc4s4mwyorwv91j6ovi5542e', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:19:51.878801')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 38, 38, '2023-02-15 15:19:51.880529')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:19:51.881813' WHERE `images`.`id` = 38[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: qnmegc4s4mwyorwv91j6ovi5542e (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9867c7cc-c787-49ac-aa13-477983074835) to Async(default) with arguments: #<GlobalID:0x00007ff6de820780 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/38>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: qnmegc4s4mwyorwv91j6ovi5542e[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 7799)


[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 38 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835] Performing ActiveStorage::AnalyzeJob (Job ID: 9867c7cc-c787-49ac-aa13-477983074835) from Async(default) enqueued at 2023-02-15T15:19:51Z with arguments: #<GlobalID:0x00007ff6de7cc4c8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/38>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 38[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9867c7cc-c787-49ac-aa13-477983074835] Performed ActiveStorage::AnalyzeJob (Job ID: 9867c7cc-c787-49ac-aa13-477983074835) from Async(default) in 10.95ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:21:13 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de725f38 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-ym74rj.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:21:13.273748', '2023-02-15 15:21:13.273748')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 39 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 39 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('ygseyyhc1nnc7in3a2tsdxj6y00i', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:21:13.277149')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 39, 39, '2023-02-15 15:21:13.277898')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:21:13.278465' WHERE `images`.`id` = 39[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: ygseyyhc1nnc7in3a2tsdxj6y00i (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 965ee7ff-5a02-4f71-8d15-261e1fff294d) to Async(default) with arguments: #<GlobalID:0x00007ff6de6b3ed8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/39>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: ygseyyhc1nnc7in3a2tsdxj6y00i[0m
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 7790)


[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 39 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d] Performing ActiveStorage::AnalyzeJob (Job ID: 965ee7ff-5a02-4f71-8d15-261e1fff294d) from Async(default) enqueued at 2023-02-15T15:21:13Z with arguments: #<GlobalID:0x00007ff6de678b08 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/39>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 39[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [965ee7ff-5a02-4f71-8d15-261e1fff294d] Performed ActiveStorage::AnalyzeJob (Job ID: 965ee7ff-5a02-4f71-8d15-261e1fff294d) from Async(default) in 15.19ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:21:52 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1c3668 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-d9k319.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:21:52.177404', '2023-02-15 15:21:52.177404')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 40 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 40 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('mwkw0wdrgx4qqhahrcxzp5ui992k', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:21:52.182024')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 40, 40, '2023-02-15 15:21:52.183836')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:21:52.184989' WHERE `images`.`id` = 40[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: mwkw0wdrgx4qqhahrcxzp5ui992k (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf6d2d8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/40>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: mwkw0wdrgx4qqhahrcxzp5ui992k[0m
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 7790)


[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1]   [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 40 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1] Performing ActiveStorage::AnalyzeJob (Job ID: eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1) from Async(default) enqueued at 2023-02-15T15:21:52Z with arguments: #<GlobalID:0x00007ff6dcf579b0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/40>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 40[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1] Performed ActiveStorage::AnalyzeJob (Job ID: eaaea2a4-3c8c-4a07-b457-f3e993bcd7d1) from Async(default) in 12.26ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:23:22 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf2fca8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-yua0co.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:23:22.946416', '2023-02-15 15:23:22.946416')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 41 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 41 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('sdlqla4jz4kch6bvgdrn3cvfnv24', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:23:22.949690')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 41, 41, '2023-02-15 15:23:22.950807')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:23:22.951915' WHERE `images`.`id` = 41[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: sdlqla4jz4kch6bvgdrn3cvfnv24 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 73fc5ec1-2059-4f9b-b9f4-791e31cec805) to Async(default) with arguments: #<GlobalID:0x00007ff6dceebad0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/41>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: sdlqla4jz4kch6bvgdrn3cvfnv24[0m
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 7798)


[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 41 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805] Performing ActiveStorage::AnalyzeJob (Job ID: 73fc5ec1-2059-4f9b-b9f4-791e31cec805) from Async(default) enqueued at 2023-02-15T15:23:22Z with arguments: #<GlobalID:0x00007ff6dcecd8f0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/41>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805]   [1m[36mActiveStorage::Blob Update (0.5ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 41[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805]   [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [73fc5ec1-2059-4f9b-b9f4-791e31cec805] Performed ActiveStorage::AnalyzeJob (Job ID: 73fc5ec1-2059-4f9b-b9f4-791e31cec805) from Async(default) in 23.73ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:25:01 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfd27b88 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-fyjfg5.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:25:01.482778', '2023-02-15 15:25:01.482778')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 42 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.7ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 42 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('587ag1gobwl1f8ytszmd2p140xwh', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:25:01.490358')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 42, 42, '2023-02-15 15:25:01.492033')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:25:01.493306' WHERE `images`.`id` = 42[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 587ag1gobwl1f8ytszmd2p140xwh (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d3942c1d-ae5a-4d1b-be30-751c33cf7ddc) to Async(default) with arguments: #<GlobalID:0x00007ff6dfbb2fa0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/42>>
[36m  Disk Storage (0.0ms) [0m[34mDownloaded file from key: 587ag1gobwl1f8ytszmd2p140xwh[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 7793)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 42 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc] Performing ActiveStorage::AnalyzeJob (Job ID: d3942c1d-ae5a-4d1b-be30-751c33cf7ddc) from Async(default) enqueued at 2023-02-15T15:25:01Z with arguments: #<GlobalID:0x00007ff6e077e230 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/42>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 42[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d3942c1d-ae5a-4d1b-be30-751c33cf7ddc] Performed ActiveStorage::AnalyzeJob (Job ID: d3942c1d-ae5a-4d1b-be30-751c33cf7ddc) from Async(default) in 11.79ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:26:45 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de9155c8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-ww9asz.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:26:45.860673', '2023-02-15 15:26:45.860673')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 43 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 43 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.6ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('72v9rmh2f548tylq74xk88dcegil', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:26:45.871548')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 43, 43, '2023-02-15 15:26:45.875530')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:26:45.877497' WHERE `images`.`id` = 43[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 72v9rmh2f548tylq74xk88dcegil (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0a6fe3ac-f06e-4f59-9c32-a6022cd31a45) to Async(default) with arguments: #<GlobalID:0x00007ff6de84a800 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/43>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 72v9rmh2f548tylq74xk88dcegil[0m
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 3.7ms | Allocations: 7806)


[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 43 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45] Performing ActiveStorage::AnalyzeJob (Job ID: 0a6fe3ac-f06e-4f59-9c32-a6022cd31a45) from Async(default) enqueued at 2023-02-15T15:26:45Z with arguments: #<GlobalID:0x00007ff6de7eb8c8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/43>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 43[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45]   [1m[36mTRANSACTION (7.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0a6fe3ac-f06e-4f59-9c32-a6022cd31a45] Performed ActiveStorage::AnalyzeJob (Job ID: 0a6fe3ac-f06e-4f59-9c32-a6022cd31a45) from Async(default) in 16.02ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:35:03 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de76a0c0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-qxf1i5.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:35:03.474362', '2023-02-15 15:35:03.474362')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 44 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 44 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('kbhi5esa7nur3amc0o8dqtk5ei3x', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:35:03.482143')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 44, 44, '2023-02-15 15:35:03.483337')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:35:03.484102' WHERE `images`.`id` = 44[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: kbhi5esa7nur3amc0o8dqtk5ei3x (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 886fe27e-5d12-45e9-b16f-cd5355dc3f4e) to Async(default) with arguments: #<GlobalID:0x00007ff6de6d8f08 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/44>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: kbhi5esa7nur3amc0o8dqtk5ei3x[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 7897)


[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 44 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e] Performing ActiveStorage::AnalyzeJob (Job ID: 886fe27e-5d12-45e9-b16f-cd5355dc3f4e) from Async(default) enqueued at 2023-02-15T15:35:03Z with arguments: #<GlobalID:0x00007ff6de6af220 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/44>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 44[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e]   [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [886fe27e-5d12-45e9-b16f-cd5355dc3f4e] Performed ActiveStorage::AnalyzeJob (Job ID: 886fe27e-5d12-45e9-b16f-cd5355dc3f4e) from Async(default) in 10.85ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:41:19 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1ed4b8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-9lhmx8.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:41:19.051340', '2023-02-15 15:41:19.051340')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 45 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 45 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.9ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('p6jhl8swh7ghfie0mg1s4f8c5vjb', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:41:19.054879')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 45, 45, '2023-02-15 15:41:19.057108')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:41:19.058200' WHERE `images`.`id` = 45[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: p6jhl8swh7ghfie0mg1s4f8c5vjb (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 39961381-8753-4551-86c7-6deed87593a7) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf6dcd8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/45>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: p6jhl8swh7ghfie0mg1s4f8c5vjb[0m
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 2.9ms | Allocations: 7908)


[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 45 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7] Performing ActiveStorage::AnalyzeJob (Job ID: 39961381-8753-4551-86c7-6deed87593a7) from Async(default) enqueued at 2023-02-15T15:41:19Z with arguments: #<GlobalID:0x00007ff6dcf50390 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/45>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 45[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [39961381-8753-4551-86c7-6deed87593a7] Performed ActiveStorage::AnalyzeJob (Job ID: 39961381-8753-4551-86c7-6deed87593a7) from Async(default) in 7.87ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:42:22 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf28f70 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-jil0w.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:42:22.409720', '2023-02-15 15:42:22.409720')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.9ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 46 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 46 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('svm6crtrv0bwkpe4fugms41o0ap4', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:42:22.422158')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 46, 46, '2023-02-15 15:42:22.424581')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:42:22.425984' WHERE `images`.`id` = 46[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: svm6crtrv0bwkpe4fugms41o0ap4 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: db6d62c1-b3f6-41ce-92a8-6a8e52e11b23) to Async(default) with arguments: #<GlobalID:0x00007ff6dcee5928 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/46>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: svm6crtrv0bwkpe4fugms41o0ap4[0m
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 4.5ms | Allocations: 7807)


[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 46 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23] Performing ActiveStorage::AnalyzeJob (Job ID: db6d62c1-b3f6-41ce-92a8-6a8e52e11b23) from Async(default) enqueued at 2023-02-15T15:42:22Z with arguments: #<GlobalID:0x00007ff6dcecf1f0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/46>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 46[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [db6d62c1-b3f6-41ce-92a8-6a8e52e11b23] Performed ActiveStorage::AnalyzeJob (Job ID: db6d62c1-b3f6-41ce-92a8-6a8e52e11b23) from Async(default) in 10.06ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:45:38 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dfd11360 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-yaw97j.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:45:38.997375', '2023-02-15 15:45:38.997375')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 47 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 47 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('si6u4fl7ybzi92zjnovo85voruzu', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:45:39.006519')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 47, 47, '2023-02-15 15:45:39.010279')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:45:39.013487' WHERE `images`.`id` = 47[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: si6u4fl7ybzi92zjnovo85voruzu (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 65adb1a1-a7df-4385-8d01-8990e90012e1) to Async(default) with arguments: #<GlobalID:0x00007ff6dfbad8c0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/47>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: si6u4fl7ybzi92zjnovo85voruzu[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 3.3ms | Allocations: 7800)


[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 47 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1] Performing ActiveStorage::AnalyzeJob (Job ID: 65adb1a1-a7df-4385-8d01-8990e90012e1) from Async(default) enqueued at 2023-02-15T15:45:39Z with arguments: #<GlobalID:0x00007ff6e077d538 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/47>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 47[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [65adb1a1-a7df-4385-8d01-8990e90012e1] Performed ActiveStorage::AnalyzeJob (Job ID: 65adb1a1-a7df-4385-8d01-8990e90012e1) from Async(default) in 8.29ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:46:45 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de90ca90 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-v71s3d.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:46:45.364398', '2023-02-15 15:46:45.364398')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 48 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 48 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jgw0753a5k8tkq8b0bgslffatlrm', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:46:45.371060')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 48, 48, '2023-02-15 15:46:45.372953')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:46:45.374413' WHERE `images`.`id` = 48[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: jgw0753a5k8tkq8b0bgslffatlrm (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4) to Async(default) with arguments: #<GlobalID:0x00007ff6de84a850 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/48>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: jgw0753a5k8tkq8b0bgslffatlrm[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 7807)


[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 48 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4] Performing ActiveStorage::AnalyzeJob (Job ID: 7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4) from Async(default) enqueued at 2023-02-15T15:46:45Z with arguments: #<GlobalID:0x00007ff6de7e9a78 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/48>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 48[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4] Performed ActiveStorage::AnalyzeJob (Job ID: 7ad3b9d9-c2f3-40a6-9498-cdb9db9211b4) from Async(default) in 14.29ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:47:47 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de7a27b8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-7w64y0.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:47:47.257795', '2023-02-15 15:47:47.257795')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 49 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 49 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('3kmt4ruwqmi1zii1k9unbzc966xf', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:47:47.261235')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 49, 49, '2023-02-15 15:47:47.264090')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:47:47.267247' WHERE `images`.`id` = 49[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 3kmt4ruwqmi1zii1k9unbzc966xf (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: bfb6166f-90d1-4ba9-9ef5-71724f83fbae) to Async(default) with arguments: #<GlobalID:0x00007ff6de6c3b80 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/49>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 3kmt4ruwqmi1zii1k9unbzc966xf[0m
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 2.0ms | Allocations: 7801)


[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 49 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae] Performing ActiveStorage::AnalyzeJob (Job ID: bfb6166f-90d1-4ba9-9ef5-71724f83fbae) from Async(default) enqueued at 2023-02-15T15:47:47Z with arguments: #<GlobalID:0x00007ff6de693430 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/49>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 49[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae]   [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [bfb6166f-90d1-4ba9-9ef5-71724f83fbae] Performed ActiveStorage::AnalyzeJob (Job ID: bfb6166f-90d1-4ba9-9ef5-71724f83fbae) from Async(default) in 11.87ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:57:45 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dd1e18e8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-1jrrnb.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:57:45.353540', '2023-02-15 15:57:45.353540')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 50 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 50 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('7kux9l9jcj0zu36ihe4o4oqqm5ai', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:57:45.363212')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 50, 50, '2023-02-15 15:57:45.364914')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:57:45.366611' WHERE `images`.`id` = 50[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 7kux9l9jcj0zu36ihe4o4oqqm5ai (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: b82ea3c3-b5b2-4415-92b3-398300fb3ef5) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf97df8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/50>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 7kux9l9jcj0zu36ihe4o4oqqm5ai[0m
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 4.2ms | Allocations: 7924)


[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 50 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5] Performing ActiveStorage::AnalyzeJob (Job ID: b82ea3c3-b5b2-4415-92b3-398300fb3ef5) from Async(default) enqueued at 2023-02-15T15:57:45Z with arguments: #<GlobalID:0x00007ff6dcf7a410 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/50>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 50[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5]   [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [b82ea3c3-b5b2-4415-92b3-398300fb3ef5] Performed ActiveStorage::AnalyzeJob (Job ID: b82ea3c3-b5b2-4415-92b3-398300fb3ef5) from Async(default) in 13.58ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 15:59:50 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf21950 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-v1uwcj.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 15:59:50.726224', '2023-02-15 15:59:50.726224')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 51 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 51 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('k1e31ftawhqopo883c3v934143ek', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 15:59:50.730171')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 51, 51, '2023-02-15 15:59:50.731967')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 15:59:50.733105' WHERE `images`.`id` = 51[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: k1e31ftawhqopo883c3v934143ek (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 1c93c454-46db-4d30-aa28-b609b6a76801) to Async(default) with arguments: #<GlobalID:0x00007ff6dcedd660 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/51>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: k1e31ftawhqopo883c3v934143ek[0m
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 7808)


[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 51 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801] Performing ActiveStorage::AnalyzeJob (Job ID: 1c93c454-46db-4d30-aa28-b609b6a76801) from Async(default) enqueued at 2023-02-15T15:59:50Z with arguments: #<GlobalID:0x00007ff6dcec6e88 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/51>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 51[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [1c93c454-46db-4d30-aa28-b609b6a76801] Performed ActiveStorage::AnalyzeJob (Job ID: 1c93c454-46db-4d30-aa28-b609b6a76801) from Async(default) in 11.1ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 16:01:13 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6e0f5be30 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-yfaez9.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 16:01:13.571840', '2023-02-15 16:01:13.571840')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 52 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 52 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('qygs88x32rorlwf60it652iobezd', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 16:01:13.580591')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 52, 52, '2023-02-15 16:01:13.581877')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 16:01:13.583004' WHERE `images`.`id` = 52[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: qygs88x32rorlwf60it652iobezd (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 11bd7891-7ca7-4427-9682-6c6f94ecd0c7) to Async(default) with arguments: #<GlobalID:0x00007ff6e07cc318 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/52>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: qygs88x32rorlwf60it652iobezd[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 7807)


[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 52 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7] Performing ActiveStorage::AnalyzeJob (Job ID: 11bd7891-7ca7-4427-9682-6c6f94ecd0c7) from Async(default) enqueued at 2023-02-15T16:01:13Z with arguments: #<GlobalID:0x00007ff6e06dac70 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/52>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 52[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7]   [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [11bd7891-7ca7-4427-9682-6c6f94ecd0c7] Performed ActiveStorage::AnalyzeJob (Job ID: 11bd7891-7ca7-4427-9682-6c6f94ecd0c7) from Async(default) in 7.58ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 16:04:36 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de8f7780 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-a7acm0.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 16:04:36.349500', '2023-02-15 16:04:36.349500')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 53 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 53 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('w8059iox7yvp1651yqw3fy72mn7v', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 16:04:36.354731')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 53, 53, '2023-02-15 16:04:36.356602')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 16:04:36.357790' WHERE `images`.`id` = 53[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: w8059iox7yvp1651yqw3fy72mn7v (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 499c4464-298e-4491-acbd-dd95c3d15538) to Async(default) with arguments: #<GlobalID:0x00007ff6de889e60 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/53>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: w8059iox7yvp1651yqw3fy72mn7v[0m
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 2.1ms | Allocations: 7822)


[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 53 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538] Performing ActiveStorage::AnalyzeJob (Job ID: 499c4464-298e-4491-acbd-dd95c3d15538) from Async(default) enqueued at 2023-02-15T16:04:36Z with arguments: #<GlobalID:0x00007ff6de85c898 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/53>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 53[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538]   [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [499c4464-298e-4491-acbd-dd95c3d15538] Performed ActiveStorage::AnalyzeJob (Job ID: 499c4464-298e-4491-acbd-dd95c3d15538) from Async(default) in 10.25ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 16:06:22 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de790568 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-l676w1.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 16:06:22.402723', '2023-02-15 16:06:22.402723')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 54 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 54 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (1.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('im78lozjrz63l2ympp9m1fn57i0u', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 16:06:22.413214')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 54, 54, '2023-02-15 16:06:22.419155')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 16:06:22.420638' WHERE `images`.`id` = 54[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: im78lozjrz63l2ympp9m1fn57i0u (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f85b7fd7-731b-49bd-af26-6659b92390ad) to Async(default) with arguments: #<GlobalID:0x00007ff6de70dc80 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/54>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: im78lozjrz63l2ympp9m1fn57i0u[0m
Completed 200 OK in 28ms (Views: 0.3ms | ActiveRecord: 5.1ms | Allocations: 7855)


[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 54 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad] Performing ActiveStorage::AnalyzeJob (Job ID: f85b7fd7-731b-49bd-af26-6659b92390ad) from Async(default) enqueued at 2023-02-15T16:06:22Z with arguments: #<GlobalID:0x00007ff6de6e0550 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/54>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 54[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad]   [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f85b7fd7-731b-49bd-af26-6659b92390ad] Performed ActiveStorage::AnalyzeJob (Job ID: f85b7fd7-731b-49bd-af26-6659b92390ad) from Async(default) in 10.09ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 16:09:34 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6de6383a0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-r6wfe3.jpg>, @original_filename="Madjid_Colourful_landscape-scaled.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Madjid_Colourful_landscape-scaled.jpg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'Madjid_Colourful_landscape-scaled.jpg', NULL, NULL, NULL, NULL, '2023-02-15 16:09:35.005571', '2023-02-15 16:09:35.005571')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 55 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 55 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('mfgs0rhosl64nbuk64avk23ylgwv', 'Madjid_Colourful_landscape-scaled.jpg', 'image/jpeg', '{\"identified\":true}', 'local', 383039, 'eHcXQc//n0LZae6cVSC6wQ==', '2023-02-15 16:09:35.017947')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 55, 55, '2023-02-15 16:09:35.020036')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 16:09:35.021458' WHERE `images`.`id` = 55[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (1.6ms) [0m[32mUploaded file to key: mfgs0rhosl64nbuk64avk23ylgwv (checksum: eHcXQc//n0LZae6cVSC6wQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 16ba9dc6-4a0c-469b-8521-426c23b534ca) to Async(default) with arguments: #<GlobalID:0x00007ff6dcf82958 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/55>>
[36m  Disk Storage (0.5ms) [0m[34mDownloaded file from key: mfgs0rhosl64nbuk64avk23ylgwv[0m
Completed 200 OK in 29ms (Views: 0.3ms | ActiveRecord: 5.1ms | Allocations: 7971)


[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 55 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca] Performing ActiveStorage::AnalyzeJob (Job ID: 16ba9dc6-4a0c-469b-8521-426c23b534ca) from Async(default) enqueued at 2023-02-15T16:09:35Z with arguments: #<GlobalID:0x00007ff6dcf94ec8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/55>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 55[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [16ba9dc6-4a0c-469b-8521-426c23b534ca] Performed ActiveStorage::AnalyzeJob (Job ID: 16ba9dc6-4a0c-469b-8521-426c23b534ca) from Async(default) in 15.29ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 16:11:37 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dcf3c548 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-1tpk21.jpg>, @original_filename="Madjid_Colourful_landscape-scaled.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Madjid_Colourful_landscape-scaled.jpg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'Madjid_Colourful_landscape-scaled.jpg', NULL, NULL, NULL, NULL, '2023-02-15 16:11:37.891607', '2023-02-15 16:11:37.891607')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 56 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 56 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('cybg0i2dd1oyd2h6y78ugkt5zjxs', 'Madjid_Colourful_landscape-scaled.jpg', 'image/jpeg', '{\"identified\":true}', 'local', 79394, 's9psuBJxcpAnT04BWOSUiw==', '2023-02-15 16:11:37.901120')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 56, 56, '2023-02-15 16:11:37.902946')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 16:11:37.904379' WHERE `images`.`id` = 56[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.8ms) [0m[32mUploaded file to key: cybg0i2dd1oyd2h6y78ugkt5zjxs (checksum: s9psuBJxcpAnT04BWOSUiw==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 6609aa84-54e7-4bfd-bd79-effb631e9899) to Async(default) with arguments: #<GlobalID:0x00007ff6dceffaf8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/56>>
[36m  Disk Storage (0.2ms) [0m[34mDownloaded file from key: cybg0i2dd1oyd2h6y78ugkt5zjxs[0m
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 3.3ms | Allocations: 7802)


[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 56 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899] Performing ActiveStorage::AnalyzeJob (Job ID: 6609aa84-54e7-4bfd-bd79-effb631e9899) from Async(default) enqueued at 2023-02-15T16:11:37Z with arguments: #<GlobalID:0x00007ff6dcee24f8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/56>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 56[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [6609aa84-54e7-4bfd-bd79-effb631e9899] Performed ActiveStorage::AnalyzeJob (Job ID: 6609aa84-54e7-4bfd-bd79-effb631e9899) from Async(default) in 18.33ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 16:12:18 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007ff6dceb8b80 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-623885-u67oue.jpg>, @original_filename="Madjid_Colourful_landscape-scaled.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"Madjid_Colourful_landscape-scaled.jpg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, 'Madjid_Colourful_landscape-scaled.jpg', NULL, NULL, NULL, NULL, '2023-02-15 16:12:18.019433', '2023-02-15 16:12:18.019433')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 57 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 57 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('2w6e8inn70cyt2kwd3tf7g1lomvn', 'Madjid_Colourful_landscape-scaled.jpg', 'image/jpeg', '{\"identified\":true}', 'local', 79394, 's9psuBJxcpAnT04BWOSUiw==', '2023-02-15 16:12:18.030789')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 57, 57, '2023-02-15 16:12:18.031976')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 16:12:18.032908' WHERE `images`.`id` = 57[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 2w6e8inn70cyt2kwd3tf7g1lomvn (checksum: s9psuBJxcpAnT04BWOSUiw==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: e09d3519-a020-410e-aa72-1ed017c84add) to Async(default) with arguments: #<GlobalID:0x00007ff6dfcf54a8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/57>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 2w6e8inn70cyt2kwd3tf7g1lomvn[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 7805)


[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 57 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add] Performing ActiveStorage::AnalyzeJob (Job ID: e09d3519-a020-410e-aa72-1ed017c84add) from Async(default) enqueued at 2023-02-15T16:12:18Z with arguments: #<GlobalID:0x00007ff6dfc6e430 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/57>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 57[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add]   [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [e09d3519-a020-410e-aa72-1ed017c84add] Performed ActiveStorage::AnalyzeJob (Job ID: e09d3519-a020-410e-aa72-1ed017c84add) from Async(default) in 8.73ms
Started GET "/api-docs" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Started GET "/api-docs/index.html" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2023-02-15 18:31:42 +0000
Started GET "/api-docs/index.html" for 127.0.0.1 at 2023-02-15 18:35:48 +0000
Started GET "/api-docs/swagger-ui.css" for 127.0.0.1 at 2023-02-15 18:35:48 +0000
Started GET "/api-docs/swagger-ui-bundle.js" for 127.0.0.1 at 2023-02-15 18:35:48 +0000
Started GET "/api-docs/swagger-ui-standalone-preset.js" for 127.0.0.1 at 2023-02-15 18:35:48 +0000
Started GET "/api-docs/v1/swagger.json" for 127.0.0.1 at 2023-02-15 18:35:48 +0000
Started GET "/api-docs/favicon-32x32.png" for 127.0.0.1 at 2023-02-15 18:35:48 +0000
Started GET "/v1/images/25" for 127.0.0.1 at 2023-02-15 18:35:58 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"25"}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 25 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 18ms (Views: 2.6ms | ActiveRecord: 0.2ms | Allocations: 3508)


Started GET "/v1/images/27" for 127.0.0.1 at 2023-02-15 18:36:08 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"27"}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 27 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 927)


Started GET "/v1/images/57" for 127.0.0.1 at 2023-02-15 18:36:57 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"57"}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 57 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 773)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 18:54:20 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f629c4b0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-lwj4gy.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 18:54:20.920077', '2023-02-15 18:54:20.920077')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 58 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 58 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('3q7e56rw8wez8aluf0i1s8rw2p4g', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 18:54:20.935784')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 58, 58, '2023-02-15 18:54:20.937743')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 18:54:20.939189' WHERE `images`.`id` = 58[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 3q7e56rw8wez8aluf0i1s8rw2p4g (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 45da8532-034b-4ba3-9cee-15c8d063f75c) to Async(default) with arguments: #<GlobalID:0x00007fb3f4e342c0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/58>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 3q7e56rw8wez8aluf0i1s8rw2p4g[0m
Completed 200 OK in 36ms (Views: 0.2ms | ActiveRecord: 5.9ms | Allocations: 19351)


[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 58 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c] Performing ActiveStorage::AnalyzeJob (Job ID: 45da8532-034b-4ba3-9cee-15c8d063f75c) from Async(default) enqueued at 2023-02-15T18:54:20Z with arguments: #<GlobalID:0x00007fb3f4dcfdc0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/58>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 58[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c]   [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [45da8532-034b-4ba3-9cee-15c8d063f75c] Performed ActiveStorage::AnalyzeJob (Job ID: 45da8532-034b-4ba3-9cee-15c8d063f75c) from Async(default) in 6.83ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 18:56:28 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f4d52078 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-qapa90.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 18:56:28.340029', '2023-02-15 18:56:28.340029')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 59 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 59 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('8ss0tqzvh0ufsjhai1pen8wggv31', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 18:56:28.347476')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 59, 59, '2023-02-15 18:56:28.348911')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 18:56:28.350397' WHERE `images`.`id` = 59[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 8ss0tqzvh0ufsjhai1pen8wggv31 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 69957d96-3556-41ae-a8d0-f90aa4ebb291) to Async(default) with arguments: #<GlobalID:0x00007fb3f4c676b8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/59>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 8ss0tqzvh0ufsjhai1pen8wggv31[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.9ms | Allocations: 7846)


[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 59 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291] Performing ActiveStorage::AnalyzeJob (Job ID: 69957d96-3556-41ae-a8d0-f90aa4ebb291) from Async(default) enqueued at 2023-02-15T18:56:28Z with arguments: #<GlobalID:0x00007fb3f4c341f0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/59>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 59[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291]   [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [69957d96-3556-41ae-a8d0-f90aa4ebb291] Performed ActiveStorage::AnalyzeJob (Job ID: 69957d96-3556-41ae-a8d0-f90aa4ebb291) from Async(default) in 12.55ms
Started GET "/v1/images/59" for 127.0.0.1 at 2023-02-15 18:56:47 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"59", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 59 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 785)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 18:58:49 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f4be1ae0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-5747c2.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 18:58:49.172287', '2023-02-15 18:58:49.172287')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 60 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 60 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('smv6ph5ja5dxk97b23kwjza6ainm', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 18:58:49.175836')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (2.5ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 60, 60, '2023-02-15 18:58:49.179612')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 18:58:49.183302' WHERE `images`.`id` = 60[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.5ms) [0m[32mUploaded file to key: smv6ph5ja5dxk97b23kwjza6ainm (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 88690b0a-e7ad-43a4-aa52-2f3f3286a365) to Async(default) with arguments: #<GlobalID:0x00007fb3f4112948 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/60>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: smv6ph5ja5dxk97b23kwjza6ainm[0m
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 5.1ms | Allocations: 7799)


[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 60 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365] Performing ActiveStorage::AnalyzeJob (Job ID: 88690b0a-e7ad-43a4-aa52-2f3f3286a365) from Async(default) enqueued at 2023-02-15T18:58:49Z with arguments: #<GlobalID:0x00007fb3f40fd9f8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/60>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 60[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365]   [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [88690b0a-e7ad-43a4-aa52-2f3f3286a365] Performed ActiveStorage::AnalyzeJob (Job ID: 88690b0a-e7ad-43a4-aa52-2f3f3286a365) from Async(default) in 10.29ms
Started GET "/v1/images/60" for 127.0.0.1 at 2023-02-15 18:59:01 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"60", "image"=>{}}
  [1m[36mImage Load (0.3ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 60 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:00:28 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f40ae948 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-eftys4.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:00:28.070723', '2023-02-15 19:00:28.070723')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 61 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 61 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('hxv97qpms8d6oj9dxyx2ez5houao', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:00:28.079512')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 61, 61, '2023-02-15 19:00:28.080928')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:00:28.082167' WHERE `images`.`id` = 61[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: hxv97qpms8d6oj9dxyx2ez5houao (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 68cd7681-7c3c-4a9f-9b5c-222f79efef49) to Async(default) with arguments: #<GlobalID:0x00007fb3f4063c68 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/61>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: hxv97qpms8d6oj9dxyx2ez5houao[0m
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 2.9ms | Allocations: 7814)


[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 61 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49] Performing ActiveStorage::AnalyzeJob (Job ID: 68cd7681-7c3c-4a9f-9b5c-222f79efef49) from Async(default) enqueued at 2023-02-15T19:00:28Z with arguments: #<GlobalID:0x00007fb3f404ed18 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/61>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 61[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49]   [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [68cd7681-7c3c-4a9f-9b5c-222f79efef49] Performed ActiveStorage::AnalyzeJob (Job ID: 68cd7681-7c3c-4a9f-9b5c-222f79efef49) from Async(default) in 11.89ms
Started GET "/v1/images/61" for 127.0.0.1 at 2023-02-15 19:00:41 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"61", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 61 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 782)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:07:08 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d73eb998 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-3ph6im.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:07:08.006469', '2023-02-15 19:07:08.006469')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 62 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 62 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('jdef2yq6pvcrn21i6lpqlgm6kop4', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:07:08.010772')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 62, 62, '2023-02-15 19:07:08.011909')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:07:08.012868' WHERE `images`.`id` = 62[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: jdef2yq6pvcrn21i6lpqlgm6kop4 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d4a19c38-2bee-4b61-ab0b-51d7ff130b3a) to Async(default) with arguments: #<GlobalID:0x00007fb3d739fae8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/62>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: jdef2yq6pvcrn21i6lpqlgm6kop4[0m
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 7929)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 62 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a] Performing ActiveStorage::AnalyzeJob (Job ID: d4a19c38-2bee-4b61-ab0b-51d7ff130b3a) from Async(default) enqueued at 2023-02-15T19:07:08Z with arguments: #<GlobalID:0x00007fb3d738ab98 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/62>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 62[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a]   [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d4a19c38-2bee-4b61-ab0b-51d7ff130b3a] Performed ActiveStorage::AnalyzeJob (Job ID: d4a19c38-2bee-4b61-ab0b-51d7ff130b3a) from Async(default) in 13.54ms
Started GET "/v1/images/62" for 127.0.0.1 at 2023-02-15 19:07:20 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"62", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 62 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 767)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:10:00 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d7339c98 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-c60xqe.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:10:00.509457', '2023-02-15 19:10:00.509457')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 63 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 63 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('7c20ague899f8lycmovbxwwo90m5', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:10:00.515883')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 63, 63, '2023-02-15 19:10:00.517591')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:10:00.518974' WHERE `images`.`id` = 63[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 7c20ague899f8lycmovbxwwo90m5 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c440d9cc-ec25-45db-b5ea-29676226d0da) to Async(default) with arguments: #<GlobalID:0x00007fb3d72ef8c8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/63>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 7c20ague899f8lycmovbxwwo90m5[0m
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 7813)


[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 63 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da] Performing ActiveStorage::AnalyzeJob (Job ID: c440d9cc-ec25-45db-b5ea-29676226d0da) from Async(default) enqueued at 2023-02-15T19:10:00Z with arguments: #<GlobalID:0x00007fb3d72da0e0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/63>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 63[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c440d9cc-ec25-45db-b5ea-29676226d0da] Performed ActiveStorage::AnalyzeJob (Job ID: c440d9cc-ec25-45db-b5ea-29676226d0da) from Async(default) in 10.82ms
Started GET "/v1/images/63" for 127.0.0.1 at 2023-02-15 19:10:16 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"63", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 63 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:11:01 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d728c098 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-p7rxe3.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:11:01.632180', '2023-02-15 19:11:01.632180')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 64 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 64 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('ux8wbut1lcrjjfs978zcnvrz8wao', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:11:01.641607')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 64, 64, '2023-02-15 19:11:01.643227')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:11:01.644232' WHERE `images`.`id` = 64[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: ux8wbut1lcrjjfs978zcnvrz8wao (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3fee8a21-6c18-45ba-9c27-eaceba6cc9e6) to Async(default) with arguments: #<GlobalID:0x00007fb3d7241598 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/64>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: ux8wbut1lcrjjfs978zcnvrz8wao[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 4.9ms | Allocations: 7813)


[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 64 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6] Performing ActiveStorage::AnalyzeJob (Job ID: 3fee8a21-6c18-45ba-9c27-eaceba6cc9e6) from Async(default) enqueued at 2023-02-15T19:11:01Z with arguments: #<GlobalID:0x00007fb3d722c648 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/64>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 64[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6]   [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3fee8a21-6c18-45ba-9c27-eaceba6cc9e6] Performed ActiveStorage::AnalyzeJob (Job ID: 3fee8a21-6c18-45ba-9c27-eaceba6cc9e6) from Async(default) in 11.49ms
Started GET "/v1/images/64" for 127.0.0.1 at 2023-02-15 19:11:14 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"64", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 64 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:12:43 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d71dd5c0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-zce921.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:12:43.886838', '2023-02-15 19:12:43.886838')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.8ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 65 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 65 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('udsduftg9v37lknvey9hviult3ec', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:12:43.896915')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 65, 65, '2023-02-15 19:12:43.898748')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:12:43.900378' WHERE `images`.`id` = 65[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.6ms) [0m[32mUploaded file to key: udsduftg9v37lknvey9hviult3ec (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: d2d50215-3fe2-48de-9943-a6ea2b7a91ad) to Async(default) with arguments: #<GlobalID:0x00007fb3d7192b38 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/65>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: udsduftg9v37lknvey9hviult3ec[0m
Completed 200 OK in 22ms (Views: 0.4ms | ActiveRecord: 3.5ms | Allocations: 7785)


[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad]   [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 65 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad] Performing ActiveStorage::AnalyzeJob (Job ID: d2d50215-3fe2-48de-9943-a6ea2b7a91ad) from Async(default) enqueued at 2023-02-15T19:12:43Z with arguments: #<GlobalID:0x00007fb3d717dbe8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/65>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 65[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [d2d50215-3fe2-48de-9943-a6ea2b7a91ad] Performed ActiveStorage::AnalyzeJob (Job ID: d2d50215-3fe2-48de-9943-a6ea2b7a91ad) from Async(default) in 18.39ms
Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:13:34 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d7147bb0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-5augh6.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:13:34.536583', '2023-02-15 19:13:34.536583')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 66 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.6ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 66 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('1mjkjfxo7bag8t58xheuj71un9ut', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:13:34.546412')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 66, 66, '2023-02-15 19:13:34.548983')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:13:34.550728' WHERE `images`.`id` = 66[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: 1mjkjfxo7bag8t58xheuj71un9ut (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 9b896e2d-0a94-47a6-b243-a36039072cba) to Async(default) with arguments: #<GlobalID:0x00007fb3d70ed098 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/66>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 1mjkjfxo7bag8t58xheuj71un9ut[0m
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 4.1ms | Allocations: 7795)


[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 66 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba] Performing ActiveStorage::AnalyzeJob (Job ID: 9b896e2d-0a94-47a6-b243-a36039072cba) from Async(default) enqueued at 2023-02-15T19:13:34Z with arguments: #<GlobalID:0x00007fb3d70d8148 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/66>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 66[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba]   [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [9b896e2d-0a94-47a6-b243-a36039072cba] Performed ActiveStorage::AnalyzeJob (Job ID: 9b896e2d-0a94-47a6-b243-a36039072cba) from Async(default) in 8.74ms
Started GET "/v1/images/66" for 127.0.0.1 at 2023-02-15 19:13:50 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"66", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 66 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:14:24 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d708a560 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-t3zk7u.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:14:24.210374', '2023-02-15 19:14:24.210374')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 67 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.5ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 67 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.5ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('5052p8qg1jzjidmpojl8gyhvujwx', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:14:24.221260')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.5ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 67, 67, '2023-02-15 19:14:24.225043')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.3ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:14:24.228263' WHERE `images`.`id` = 67[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 5052p8qg1jzjidmpojl8gyhvujwx (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c0772c04-6ce8-4671-a033-55d2edb67dd5) to Async(default) with arguments: #<GlobalID:0x00007fb3d703fa38 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/67>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 5052p8qg1jzjidmpojl8gyhvujwx[0m
Completed 200 OK in 27ms (Views: 0.3ms | ActiveRecord: 4.2ms | Allocations: 7825)


[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 67 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5] Performing ActiveStorage::AnalyzeJob (Job ID: c0772c04-6ce8-4671-a033-55d2edb67dd5) from Async(default) enqueued at 2023-02-15T19:14:24Z with arguments: #<GlobalID:0x00007fb3d702ab10 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/67>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 67[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0772c04-6ce8-4671-a033-55d2edb67dd5] Performed ActiveStorage::AnalyzeJob (Job ID: c0772c04-6ce8-4671-a033-55d2edb67dd5) from Async(default) in 8.79ms
Started GET "/v1/images/67" for 127.0.0.1 at 2023-02-15 19:14:37 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"67", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 67 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:19:02 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f62a9db8 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-om20v2.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:19:02.643864', '2023-02-15 19:19:02.643864')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 68 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 68 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('y9dwagnc2j4k4bdfnfgguqpcly29', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:19:02.652174')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 68, 68, '2023-02-15 19:19:02.653154')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:19:02.653961' WHERE `images`.`id` = 68[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: y9dwagnc2j4k4bdfnfgguqpcly29 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 55aced3a-7d7f-40c2-a361-3417e5c1d5f5) to Async(default) with arguments: #<GlobalID:0x00007fb3f6106c40 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/68>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: y9dwagnc2j4k4bdfnfgguqpcly29[0m
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 7816)


[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 68 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5] Performing ActiveStorage::AnalyzeJob (Job ID: 55aced3a-7d7f-40c2-a361-3417e5c1d5f5) from Async(default) enqueued at 2023-02-15T19:19:02Z with arguments: #<GlobalID:0x00007fb3f6c09b38 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/68>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 68[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5]   [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [55aced3a-7d7f-40c2-a361-3417e5c1d5f5] Performed ActiveStorage::AnalyzeJob (Job ID: 55aced3a-7d7f-40c2-a361-3417e5c1d5f5) from Async(default) in 10.54ms
Started GET "/v1/images/68" for 127.0.0.1 at 2023-02-15 19:19:16 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"68", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 68 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:22:03 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f4e23830 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-1zd3gd.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.1ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:22:03.640159', '2023-02-15 19:22:03.640159')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 69 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 69 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('p2miu32mn709pwkorjpvtngf52h6', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:22:03.645545')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 69, 69, '2023-02-15 19:22:03.648484')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:22:03.650989' WHERE `images`.`id` = 69[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: p2miu32mn709pwkorjpvtngf52h6 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 2bf71b78-1f7a-4313-beac-9b9116a9b6db) to Async(default) with arguments: #<GlobalID:0x00007fb3f4d0be98 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/69>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: p2miu32mn709pwkorjpvtngf52h6[0m
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 2.3ms | Allocations: 7799)


[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 69 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db] Performing ActiveStorage::AnalyzeJob (Job ID: 2bf71b78-1f7a-4313-beac-9b9116a9b6db) from Async(default) enqueued at 2023-02-15T19:22:03Z with arguments: #<GlobalID:0x00007fb3f4cd1130 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/69>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db]   [1m[36mActiveStorage::Blob Update (0.3ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 69[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db]   [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [2bf71b78-1f7a-4313-beac-9b9116a9b6db] Performed ActiveStorage::AnalyzeJob (Job ID: 2bf71b78-1f7a-4313-beac-9b9116a9b6db) from Async(default) in 18.83ms
Started GET "/v1/images/69" for 127.0.0.1 at 2023-02-15 19:22:16 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"69", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 69 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 770)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:31:05 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f4c2b3c0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-nb6dpx.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:31:05.022880', '2023-02-15 19:31:05.022880')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.4ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 70 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 70 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('u83ab5wnq01bv1v51bkb994rqlbw', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:31:05.031616')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 70, 70, '2023-02-15 19:31:05.032823')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:31:05.033810' WHERE `images`.`id` = 70[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: u83ab5wnq01bv1v51bkb994rqlbw (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: ad5e42f3-34c4-4d34-8b0b-685661bd96e7) to Async(default) with arguments: #<GlobalID:0x00007fb3f41414a0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/70>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: u83ab5wnq01bv1v51bkb994rqlbw[0m
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 7913)


[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 70 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7] Performing ActiveStorage::AnalyzeJob (Job ID: ad5e42f3-34c4-4d34-8b0b-685661bd96e7) from Async(default) enqueued at 2023-02-15T19:31:05Z with arguments: #<GlobalID:0x00007fb3f412bd80 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/70>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 70[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7]   [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [ad5e42f3-34c4-4d34-8b0b-685661bd96e7] Performed ActiveStorage::AnalyzeJob (Job ID: ad5e42f3-34c4-4d34-8b0b-685661bd96e7) from Async(default) in 9.44ms
Started GET "/v1/images/70" for 127.0.0.1 at 2023-02-15 19:31:18 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"70", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 70 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:31:47 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f40e4598 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-24rp4c.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.6ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:31:47.973805', '2023-02-15 19:31:47.973805')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.7ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 71 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 71 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('rmydug9zb7cfonryzp5d23klw6p9', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:31:47.984526')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 71, 71, '2023-02-15 19:31:47.986263')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:31:47.987404' WHERE `images`.`id` = 71[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: rmydug9zb7cfonryzp5d23klw6p9 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 8070a4b7-0ea2-4df7-b87d-043686d6dffe) to Async(default) with arguments: #<GlobalID:0x00007fb3f40a1a40 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/71>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: rmydug9zb7cfonryzp5d23klw6p9[0m
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 7804)


[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 71 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe] Performing ActiveStorage::AnalyzeJob (Job ID: 8070a4b7-0ea2-4df7-b87d-043686d6dffe) from Async(default) enqueued at 2023-02-15T19:31:47Z with arguments: #<GlobalID:0x00007fb3f4084940 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/71>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 71[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe]   [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [8070a4b7-0ea2-4df7-b87d-043686d6dffe] Performed ActiveStorage::AnalyzeJob (Job ID: 8070a4b7-0ea2-4df7-b87d-043686d6dffe) from Async(default) in 13.48ms
Started GET "/v1/images/71" for 127.0.0.1 at 2023-02-15 19:32:00 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"71", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 71 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:36:17 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3f4048ee0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-9pp9q9.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.4ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:36:17.982888', '2023-02-15 19:36:17.982888')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 72 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 72 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('zvh5z4msr8qewa0jgy13y78fta5j', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:36:17.991116')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 72, 72, '2023-02-15 19:36:17.992303')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:36:17.993198' WHERE `images`.`id` = 72[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: zvh5z4msr8qewa0jgy13y78fta5j (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a95309c1-ad10-4331-92cc-9ab81ffe41b5) to Async(default) with arguments: #<GlobalID:0x00007fb3f4005ca8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/72>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: zvh5z4msr8qewa0jgy13y78fta5j[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 7813)


[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 72 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5] Performing ActiveStorage::AnalyzeJob (Job ID: a95309c1-ad10-4331-92cc-9ab81ffe41b5) from Async(default) enqueued at 2023-02-15T19:36:17Z with arguments: #<GlobalID:0x00007fb3d73dcdd0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/72>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 72[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5]   [1m[36mTRANSACTION (5.0ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a95309c1-ad10-4331-92cc-9ab81ffe41b5] Performed ActiveStorage::AnalyzeJob (Job ID: a95309c1-ad10-4331-92cc-9ab81ffe41b5) from Async(default) in 11.19ms
Started GET "/v1/images/72" for 127.0.0.1 at 2023-02-15 19:36:33 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"72", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 72 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:36:41 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d7398220 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-yqgf3f.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.3ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:36:41.358460', '2023-02-15 19:36:41.358460')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 73 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 73 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('lor0yrfy0t3gk0ss3k7ttr3wzt2d', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:36:41.367256')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 73, 73, '2023-02-15 19:36:41.368794')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:36:41.369770' WHERE `images`.`id` = 73[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: lor0yrfy0t3gk0ss3k7ttr3wzt2d (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 51738b97-4a44-441e-92dd-ae0c3a52f206) to Async(default) with arguments: #<GlobalID:0x00007fb3d7324eb0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/73>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: lor0yrfy0t3gk0ss3k7ttr3wzt2d[0m
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 2.6ms | Allocations: 7802)


[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 73 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206] Performing ActiveStorage::AnalyzeJob (Job ID: 51738b97-4a44-441e-92dd-ae0c3a52f206) from Async(default) enqueued at 2023-02-15T19:36:41Z with arguments: #<GlobalID:0x00007fb3d730f6f0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/73>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 73[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206]   [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [51738b97-4a44-441e-92dd-ae0c3a52f206] Performed ActiveStorage::AnalyzeJob (Job ID: 51738b97-4a44-441e-92dd-ae0c3a52f206) from Async(default) in 6.18ms
Started GET "/v1/images/73" for 127.0.0.1 at 2023-02-15 19:36:54 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"73", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 73 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.4ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:37:16 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d72ee8b0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-vc4yc0.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:37:16.132087', '2023-02-15 19:37:16.132087')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 74 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 74 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('98dhw3uwurge6qqwyyii6p17cup5', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:37:16.140968')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 74, 74, '2023-02-15 19:37:16.142500')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:37:16.143691' WHERE `images`.`id` = 74[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 98dhw3uwurge6qqwyyii6p17cup5 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 496fdbca-de86-4682-9a89-5d063b76cb3d) to Async(default) with arguments: #<GlobalID:0x00007fb3d72ab718 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/74>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: 98dhw3uwurge6qqwyyii6p17cup5[0m
Completed 200 OK in 17ms (Views: 0.3ms | ActiveRecord: 3.6ms | Allocations: 7828)


[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 74 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d] Performing ActiveStorage::AnalyzeJob (Job ID: 496fdbca-de86-4682-9a89-5d063b76cb3d) from Async(default) enqueued at 2023-02-15T19:37:16Z with arguments: #<GlobalID:0x00007fb3d728e7a8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/74>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 74[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [496fdbca-de86-4682-9a89-5d063b76cb3d] Performed ActiveStorage::AnalyzeJob (Job ID: 496fdbca-de86-4682-9a89-5d063b76cb3d) from Async(default) in 14.05ms
Started GET "/v1/images/74" for 127.0.0.1 at 2023-02-15 19:37:31 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"74", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 74 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


Started POST "/v1/images" for 127.0.0.1 at 2023-02-15 19:39:21 +0000
Processing by V1::Images::ImagesController#create as */*
  Parameters: {"file"=>#<ActionDispatch::Http::UploadedFile:0x00007fb3d721ebb0 @tempfile=#<Tempfile:/tmp/RackMultipart20230215-988745-1u5ol7.jpeg>, @original_filename="25803.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"file\"; filename=\"25803.jpeg\"\r\nContent-Type: image/jpeg\r\n">}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Create (0.2ms)[0m  [1m[32mINSERT INTO `images` (`elbow_plot`, `image`, `clustered_image`, `rgb_colours`, `hex_colours`, `num_clusters`, `created_at`, `updated_at`) VALUES (NULL, '25803.jpeg', NULL, NULL, NULL, NULL, '2023-02-15 19:39:21.052385', '2023-02-15 19:39:21.052385')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` INNER JOIN `active_storage_attachments` ON `active_storage_blobs`.`id` = `active_storage_attachments`.`blob_id` WHERE `active_storage_attachments`.`record_id` = 75 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT `active_storage_attachments`.* FROM `active_storage_attachments` WHERE `active_storage_attachments`.`record_id` = 75 AND `active_storage_attachments`.`record_type` = 'Image' AND `active_storage_attachments`.`name` = 'image_file' LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO `active_storage_blobs` (`key`, `filename`, `content_type`, `metadata`, `service_name`, `byte_size`, `checksum`, `created_at`) VALUES ('qn81uhk3i708azbd1m41suruamh6', '25803.jpeg', 'image/jpeg', '{\"identified\":true}', 'local', 26785, 'i4BXwIY/dAz64OTVgAKEiQ==', '2023-02-15 19:39:21.060054')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO `active_storage_attachments` (`name`, `record_type`, `record_id`, `blob_id`, `created_at`) VALUES ('image_file', 'Image', 75, 75, '2023-02-15 19:39:21.063088')[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE `images` SET `images`.`updated_at` = '2023-02-15 19:39:21.064777' WHERE `images`.`id` = 75[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/v1/images/images_controller.rb:28:in `create'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: qn81uhk3i708azbd1m41suruamh6 (checksum: i4BXwIY/dAz64OTVgAKEiQ==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a391a351-db8b-4612-b122-d20c8ac35b9b) to Async(default) with arguments: #<GlobalID:0x00007fb3d71d48a8 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/75>>
[36m  Disk Storage (0.1ms) [0m[34mDownloaded file from key: qn81uhk3i708azbd1m41suruamh6[0m
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 2.8ms | Allocations: 7809)


[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT `active_storage_blobs`.* FROM `active_storage_blobs` WHERE `active_storage_blobs`.`id` = 75 LIMIT 1[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b] Performing ActiveStorage::AnalyzeJob (Job ID: a391a351-db8b-4612-b122-d20c8ac35b9b) from Async(default) enqueued at 2023-02-15T19:39:21Z with arguments: #<GlobalID:0x00007fb3d71befd0 @uri=#<URI::GID gid://songkick-elastic/ActiveStorage::Blob/75>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE `active_storage_blobs` SET `active_storage_blobs`.`metadata` = '{\"identified\":true,\"analyzed\":true}' WHERE `active_storage_blobs`.`id` = 75[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b]   [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a391a351-db8b-4612-b122-d20c8ac35b9b] Performed ActiveStorage::AnalyzeJob (Job ID: a391a351-db8b-4612-b122-d20c8ac35b9b) from Async(default) in 15.11ms
Started GET "/v1/images/75" for 127.0.0.1 at 2023-02-15 19:39:35 +0000
Processing by V1::Images::ImagesController#show as JSON
  Parameters: {"id"=>"75", "image"=>{}}
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT `images`.* FROM `images` WHERE `images`.`id` = 75 LIMIT 1[0m
  ↳ app/controllers/v1/images/images_controller.rb:16:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 769)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.0ms)[0m  [1m[34mSELECT `ar_internal_metadata`.`value` FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[35m (36.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dominant_colours`[0m
  [1m[35m (31.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS `dc_test`[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE DATABASE `dominant_colours` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE DATABASE `dc_test` DEFAULT CHARACTER SET `utf8mb4`[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL PRIMARY KEY)[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE `ar_internal_metadata` (`key` varchar(255) NOT NULL PRIMARY KEY, `value` varchar(255), `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT GET_LOCK('7756755327057577470', 0)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
Migrating to CreateImages (20230211125548)
  [1m[35m (12.3ms)[0m  [1m[35mCREATE TABLE `images` (`id` bigint NOT NULL AUTO_INCREMENT PRIMARY KEY, `colour_pie` varchar(255), `image` varchar(255), `clustered_image` text, `rgb_colours` varchar(255), `hex_colours` varchar(255), `num_clusters` int, `created_at` datetime(6) NOT NULL, `updated_at` datetime(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211125548')[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20230211150451)
  [1m[35m (14.2ms)[0m  [1m[35mCREATE TABLE `active_storage_blobs` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `key` varchar(255) NOT NULL, `filename` varchar(255) NOT NULL, `content_type` varchar(255), `metadata` text, `service_name` varchar(255) NOT NULL, `byte_size` bigint NOT NULL, `checksum` varchar(255), `created_at` datetime(6) NOT NULL, UNIQUE INDEX `index_active_storage_blobs_on_key` (`key`))[0m
  [1m[35m (16.8ms)[0m  [1m[35mCREATE TABLE `active_storage_attachments` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `name` varchar(255) NOT NULL, `record_type` varchar(255) NOT NULL, `record_id` int NOT NULL, `blob_id` int NOT NULL, `created_at` datetime(6) NOT NULL, INDEX `index_active_storage_attachments_on_blob_id` (`blob_id`), UNIQUE INDEX `index_active_storage_attachments_uniqueness` (`record_type`, `record_id`, `name`, `blob_id`), CONSTRAINT `fk_rails_c3b3935057`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE `active_storage_variant_records` (`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY, `blob_id` int NOT NULL, `variation_digest` varchar(255) NOT NULL, UNIQUE INDEX `index_active_storage_variant_records_uniqueness` (`blob_id`, `variation_digest`), CONSTRAINT `fk_rails_993965df05`
FOREIGN KEY (`blob_id`)
  REFERENCES `active_storage_blobs` (`id`)
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO `schema_migrations` (`version`) VALUES ('20230211150451')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT `ar_internal_metadata`.* FROM `ar_internal_metadata` WHERE `ar_internal_metadata`.`key` = 'environment' LIMIT 1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO `ar_internal_metadata` (`key`, `value`, `created_at`, `updated_at`) VALUES ('environment', 'development', '2023-02-20 16:18:03.054221', '2023-02-20 16:18:03.054221')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT RELEASE_LOCK('7756755327057577470')[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT `schema_migrations`.`version` FROM `schema_migrations` ORDER BY `schema_migrations`.`version` ASC[0m
